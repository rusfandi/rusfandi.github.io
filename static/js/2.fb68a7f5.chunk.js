(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{984:function(e,t,o){"use strict";o.r(t);var a,n=o(9),r=o(21),i=o(11),l=o(14),c=o(6),s=o(13),h=o(463),d=o(417),g=o(0),u=function(e){var t,o,a,n,r=e.getFromEnv("dataSource").dataset,i=t=e.getChildren().canvas[0].getChildren("vCanvas")[0],l=e.config.defaultDatasetType||"";return r?((a=e.getDSGroupdef())&&(Object(g.M)(t,a,"datasetGroup_"+l,1,[r]),n=t.getChildren("datasetGroup_"+l)),n&&(i=n[0]),o=e.getDSdef(),void Object(g.Q)(i,o,"dataset",r.length,r)):void e.setChartMessage()},f=o(416),b=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).registerFactory("dataset",u,["vCanvas"]),e.registerFactory("legend",f.a),e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getName",value:function(){return"MSCartesian"}},{key:"getType",value:function(){return"chartAPI"}},{key:"_createLayers",value:function(){Object(r.a)(Object(c.a)(t.prototype),"_createLayers",this).call(this);var e=this.getFromEnv("animationManager");this.getChildContainer("legendGroup")||this.addChildContainer("legendGroup",e.setAnimation({el:"group",attr:{name:"legend"},component:this,container:this.getContainer("parentgroup"),label:"group"}))}},{key:"_manageLegendSpace",value:function(){d.a.call(this)}},{key:"manageGradientLegendSpace",value:function(e){return d.b.call(this,e)}}],[{key:"getName",value:function(){return"MSCartesian"}}]),t}(h.a),p=o(24),m=o(414),v=o(49),y=o(15),k=o(8),O=o(380),C=o(41),j=o(26),x=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],A={"initial.dataset.entities":function(){return{"path.appearing":function(){return x[0].slot="plot",x},"path.updating":function(e){return[{finalAttr:function(){return e.finalAttr}}]},"labelConnectors.appearing":function(){return x[0].slot="final",x},"labelConnectors.updating":null,"entityLabel.appearing":function(){return[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}]},"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":function(){return x[0].slot="final",x},"markerItem.updating":function(e){return[{finalAttr:function(){return e.finalAttr}}]}}},"initial.group.mapGroup":function(){return{"group.appearing":function(e){return[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}]},"group.updating":function(e){return[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}]},"*":null}}},w=o(31),F=Object(j.b)("redraphael","plugin"),L=window.navigator.userAgent,E=/msie/i.test(L)&&!window.opera,S=window.Math,_=S.min,T=S.max,I=/stroke/gi,P=/AppleWebKit/.test(L),R=S.ceil,M=function(e,t){var o=t?Object(g.T)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=g.Lb,o},B=function(e,t){var o,a={};if(t=t||1,!e||"object"!=typeof e)return a;for(o in e)I.test(o)||("stroke-width"===o?(a[o]=+e[o]/t,P&&(a[o]=a[o]&&R(a[o])||0)):a[o]=e[o]);return a},D={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*_(t,e-t)}},V={top:function(){return arguments[1]},middle:function(e,t){return 2*_(t,e-t)},bottom:function(e,t){return e-t}};Object(j.a)({name:"mapsAnimation",type:"animationRule",extension:A}),function(e){var t,o,a,n=window.parseFloat,r=e._createNode,i=e._setFillAndStroke,l=e.el.constructor,c={Q:"L",Z:"X",q:"l",z:"x",",":" "},s=/,?([achlmqrstvxz]),?/gi,h=function(){return this.join(",").replace(s,t)};e.svg?(t="$1",o=function(){var o=e.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);o?"string"==typeof o?o=o.replace(s,t):o.toString=h:o="M0,0",this.node.setAttribute("d",o.toString())},e._engine.litepath=function(t,o,a,n,c){var s,h=r("path");return(n||o).canvas.appendChild(h),(s=new l(h,o,n)).type="litepath",s.id=h.raphaelid=e._oid++,h.raphael=!0,i(s,c||{fill:"none",stroke:"#000"}),s},e._getPath.litepath=function(t){return e.parsePathString(t.node.getAttribute("d"))}):e.vml&&(t=function(e,t){return c[t]||t},a=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},o=function(e){return e?"string"==typeof e?e=e.replace(s,t):e.toString=h:e="M0,0",this.node.path=e,this},e._engine.litepath=function(t,o,i,c,s){var h,d=r("shape"),g=d.style,u=new l(d,o,c);return g.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",i=n(i),isNaN(i)?d.coordsize="21600 21600":(u._.bzoom=i,g.width="1px",g.height="1px",d.coordsize=u._.bcoord=i+" "+i),d.coordorigin=o.coordorigin,u.type="litepath",u.id=d.raphaelid=e._oid++,d.raphael=!0,u._transform=u.transform,u.transform=a,e._setFillAndStroke(u,s||{fill:"none",stroke:"#000"}),(c||o).canvas.appendChild(d),(h=r("skew")).on=!0,d.appendChild(h),u.skew=h,u},e._getPath.litepath=function(t){return e.parsePathString(t.node.path||"")}),e.fn.litepath=function(t,a,n){var r,i,c;return"object"==typeof t&&t.constructor!==l&&(r=t,i=(t=t.litepath).zoom,n=t.group),a&&a.constructor===l?(n=a,i=void 0):i=a,t&&t.constructor===l&&(n=t,t=""),(c=e._engine.litepath(t,this,i,n,r)).ca.litepath=o,t&&c.attr("litepath",e.is(t,"array")?[t]:t),this.__set__&&this.__set__.push(c),this._elementsById[c.id]=c}}(F);var N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).components={},e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getName",value:function(){return"entities"}},{key:"getType",value:function(){return"dataset"}},{key:"configureAttributes",value:function(e){if(e){this.JSONData={data:e};var o,n,r,i,l,c,s,h,d=this,u=d.getFromEnv("chart").jsonData,f=d.config,b=u.map||u.chart,p=[],m=d.getFromEnv("colorManager"),v=u.entitydef||[];for(l in!f.attachEvent&&m&&(d.addExtEventListener("legendUpdate",function(){if("legend"===(h=arguments[1]).component)d.legendInteractivity(h.legendItem,h.colorObj);else for(p=h.maxMinArray,c=p.length,s=0;s<c;s++)d.updateEntityColors(p[s].min,p[s].max)},m),f.attachEvent=!0),o=u.data&&u.data[0]&&u.data[0].data?d.JSONData=u.data[0].data||[]:d.JSONData=u.data||[],f.useSNameAsId=Object(g.Ab)(b.usesnameasid,0),this._redefineEntities(v),n=d.components.data,f.showTooltip=Object(g.Ab)(b.showtooltip,1),f.showHoverEffect=Object(g.Ab)(b.showhovereffect,0),o=function(e){for(var t,o=e&&e.length||0,n={};o--;)(t=e[o]).id!==a&&(n[t.id.toLowerCase()]=t);return n}(o),d.calculateDataLimits(),u.colorrange||d.detachChild(d.getChildren("colorRange")&&d.getChildren("colorRange")[0].getId()),n)r=o[l],i=n[l],r?this._configureEntity(l,i,Object(g.mb)(t._sanitizeEntityOptions(Object(g.T)({},r)),i.config)):this._configureEntity(l,i,i.config)}}},{key:"updateEntityColors",value:function(e,o){var a,n,r,i,l,c=this.components.data,s=this.getFromEnv("chart"),h={"fill-opacity":0};for(i in c)r=(n=(a=c[i]).config).cleanValue,l={"fill-opacity":(n.alphaArr||[])[0]/100||1},r<e||r>o?(t.setCustomAttrs(a,h,s),a.hidden=!0):(a.hidden=!1,t.setCustomAttrs(a,l,s))}},{key:"legendInteractivity",value:function(e,o){var a,n,r,i,l,c,s=this,h=s.getFromEnv("chart"),d=s.components.data,g=e.config,u=e.hasState("hidden"),f=s.getFromEnv("colorManager"),b={},p={"fill-opacity":0};for(a in h.getFromEnv("animationManager").setAnimationState("legendInteraction"),d)d.hasOwnProperty(a)&&(r=(g=(n=d[a]).config).cleanValue,c=f.getColorObj(r),i=g.visibleEntityAttr,b["fill-opacity"]=i["fill-opacity"],l=u?b:p,o.code===(!c.outOfRange&&c.code)&&(n.hidden=!u,t.setCustomAttrs(n,l,h),u?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))}},{key:"calculateDataLimits",value:function(){var e,t,o,a,n=this.getFromEnv("chart"),r=this.config,i=n.jsonData.data||[],l=this.getFromEnv("number-formatter"),c=1/0,s=-1/0;for(a=0,o=i.length;a<o;a++)t=i[a].value,e=l.getCleanValue(t),c=_(c,e),s=T(s,e);r.max=s,r.min=c}},{key:"_configureEntity",value:function(e,t,o){var n,r,i,l,c,s,h,d,u,f,b,p,m,v,y,O,C,j,x,A,w,F,L=this,E=L.getFromEnv("chart"),S=L.config,_=this.getFromEnv("number-formatter"),T=E.config.entityOpts,I=t.config,P=t.labelConfig,R=o.value,B=I.cleanValue=_.getCleanValue(R),D=I.formattedValue=B===a?a:_.dataLabels(B),V=Object(g.Ab)(o.showtooltip,T.showTooltip),N=this._getDefaultTooltip(t,o,L),G={formattedValue:D,sName:o.shortLabel,lName:o.label},H=T.dataLabels.style,W=I.toolText=V?Object(g.wb)(Object(g.yb)(Object(g.vb)(Object(g.yb)(o.tooltext,T.tooltext,N),[1,2,7,38,39],G,o))):"",z=I.borderColor=Object(g.yb)(o.bordercolor,T.borderColor),X=I.borderAlpha=Object(g.yb)(o.borderalpha,T.borderAlpha),K=I.borderThickness=Object(g.Ab)(o.borderthickness,T.borderThickness),Y=T.hoverOnNull,J=I.useHoverColor=Object(g.Ab)(o.showhovereffect,o.usehovercolor,Y?T.showHoverEffect:isNaN(R)?0:T.showHoverEffect),U=I.labelAlignment,Z=L.getFromEnv("colorManager");if(t.hidden=!1,I.showLabel=Object(g.Ab)(o.showlabel,T.showLabels),I.labelPadding=Object(g.Ab)(o.labelpadding,T.labelPadding),I.fontFamily=Object(g.yb)(o.font,H.fontFamily),I.fontSize=Object(g.Ab)(parseInt(o.fontsize,10),parseInt(H.fontSize,10)),I.fontBold=Object(g.Ab)(o.fontbold,0),I.fontColor=Object(g.yb)(o.fontcolor,H.color),I.connectorColor=Object(g.yb)(o.labelconnectorcolor,T.connectorColor),I.connectorAlpha=Object(g.yb)(o.labelconnectoralpha,T.connectorAlpha),I.hoverBorderThickness=Object(g.Ab)(o.borderhoverthickness,o.hoverborderthickness,T.hoverBorderThickness),I.hoverBorderColor=Object(g.yb)(o.borderhovercolor,o.hoverbordercolor,T.hoverBorderColor,I.borderColor),I.hoverBorderAlpha=Object(g.yb)(o.borderhoveralpha,o.hoverborderalpha,T.hoverBorderAlpha,I.borderAlpha),I.connectorThickness=Object(g.Ab)(o.labelconnectorthickness,T.connectorThickness),I.origConnectorThickness=I.connectorThickness,I.borderThickness=K,I.link=o.link,I.isVisible=!0,I.id=e,I.originalId=o.origId,null!==B&&((n=Z&&Z.getColor(B))&&!n.outOfRange&&(O=n.code,n.oriAlpha!==a&&(C=n.oriAlpha+""))),Object(g.yb)(o.color,o.alpha,o.angle,o.ratio)===a?(v=M({color:Object(g.yb)(O,T.fillColor),alpha:Object(g.yb)(C,T.fillAlpha),angle:Object(g.yb)(T.fillAngle),ratio:Object(g.yb)(T.fillRatio)}),m=M({color:Object(g.yb)(T.nullEntityColor),alpha:Object(g.yb)(T.nullEntityAlpha),angle:Object(g.yb)(T.nullEntityAngle),ratio:Object(g.yb)(T.nullEntityRatio)}),c=(u=null===B?m:v).FCcolor.color,s=u.FCcolor.alpha,h=u.FCcolor.angle,d=u.FCcolor.ratio):(c=Object(g.yb)(o.color,O,T.fillColor),s=Object(g.yb)(o.alpha,C,T.fillAlpha),h=Object(g.yb)(o.angle,T.fillAngle),d=Object(g.yb)(o.ratio,T.fillRatio),u=M({color:c,alpha:s,angle:h,ratio:d})),""===W&&(S.showTooltip=0),I.visibleEntityAttr={stroke:Object(k.c)(z,X),fill:(I.fillColor=u).toString(),"fill-opacity":s/100},F=s.split(","),I.alphaArr=F,J&&(Object(g.yb)(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)===a?(!T.hoverColorObject&&(T.hoverColorObject=M({color:T.hoverFillColor,alpha:T.hoverFillAlpha,angle:T.hoverFillAngle,ratio:T.hoverFillRatio})),y=T.hoverColorObject):(c=Object(g.yb)(o.fillhovercolor,o.hoverfillcolor,T.hoverFillColor),s=Object(g.yb)(o.fillhoveralpha,o.hoverfillalpha,T.hoverFillAlpha),h=Object(g.yb)(o.fillhoverangle,o.hoverfillangle,T.hoverFillAngle),d=Object(g.yb)(o.fillhoverratio,o.hoverfillratio,T.hoverFillRatio),y=M({color:c,alpha:s,angle:h,ratio:d})),I.hoverColor=y),P||(P=t.labelConfig={}),f=I.fontColor,b=I.fontFamily,p=I.fontBold,W=I.toolText,r=I.link,U?(i=U[0],l=U[1]):(i="center",l="middle"),P.align=i,P.vAlign=l,P.bgColor="",P.borderColor="",P.fontColor=f,P.fontFamily=b,P.fontBold=p,P.toolText=W,P.link=r,"object"==typeof I.options)for(j=I.entityLabels=I.entityLabels||[],w=(A=I.labels||[]).length;w--;)j[w]||(j[w]={config:{}}),P=j[w].config,(U=A[w].labelAlignment)?(i=U[0],l=U[1]):(i="center",l="middle"),P.align=i,P.vAlign=l,P.displayValue=L.getDisplayValue(t,A[w],I.options.isDataEnabled,!w,o),P.bgColor="",P.borderColor="",P.toolText=W,P.align=i,P.vAlign=l,P.bgColor="",P.borderColor="",P.fontColor=f,P.fontFamily=b,P.fontBold=p,P.toolText=W;else x={shortText:I.shortLabel,text:I.label},P.displayValue=L.getDisplayValue(t,x,!0,!0,o)}},{key:"getDisplayValue",value:function(e,t,o,n,r){var i,l=this.getFromEnv("chart").config.entityOpts,c=e.config,s=c.cleanValue,h=c.formattedValue,d=l.labelSepChar;return o?n&&"undefined"!=typeof r.displayvalue?i=r.displayvalue:(i=Object(g.yb)(l.includeNameInLabels?l.useShortName?t.shortText:t.text:""),l.includeValueInLabels&&null!==s&&(i=i===a?h:i+d+h)):i=c.label,i}},{key:"_redefineEntities",value:function(e){var t,o,a,n,r,i,l,c,s,h,d,u,f=this,b=f.config,p={},m={},v=f.getFromEnv("chart").config.entities,y=b.useSNameAsId,k=0;for(t=e.length;t--;)if(a=(o=e[t]).internalid,n=o.newid?o.newid:a,r=o.sname,i=o.lname,u=v[a],a=Object(g.Nb)(a),n=(n=Object(g.Nb)(n))&&n.toLowerCase(),u){for(d in p[n]=c={origId:a},m[a]=!0,u)c[d]=u[d];c.shortLabel=r||u.shortLabel,c.label=i||u.label,c.showhovereffect=o.showhovereffect,c.fillhovercolor=o.fillhovercolor,c.fillhoveralpha=o.fillhoveralpha,c.fillhoverangle=o.fillhoverangle,c.fillhoverratio=o.fillhoverratio,c.borderhoverthickness=o.borderhoverthickness}for(l in(h=f.components.data)||(h=f.components.data={}),p)h[l=l.toLowerCase()]||(h[l]={config:{}}),h[l].config=p[l],k+=1;for(l in s=h,v)if(c=v[l],!m[l=Object(g.Nb)(l)]){for(d in y?(!(u=s[c.shortLabel.toLowerCase()])&&(u=s[c.shortLabel.toLowerCase()]={}),u.config={},u.origId=c.shortLabel):(!(u=s[l.toLowerCase()])&&(u=s[l.toLowerCase()]={}),u.config={},u.config.origId=l),c)u.config[d]=c[d];k+=1}b.entityCount=k}},{key:"draw",value:function(){var e=this.config,t=this.getFromEnv("chart"),o=g.ib?200:10;this.config.ready=!1,e.BATCH_SIZE=o,e.labelBatchSize=g.ib?200:20,this._batchRender()(0),t.config.entityFlag=!0,t.checkComplete()}},{key:"_batchRender",value:function(){var e,t,o,n,r,i=this,l=i.config,c=i.getFromEnv("chart").config.entities.firstEntity,s=i.components.data,h=l.BATCH_SIZE,d=l.entityKeys=c?i._getKeys(c,s):Object.keys(s),g=l.entityLength=d.length;return function l(c){for(e=c,o=0;d[e]!==a;)if(t=s[d[e]],r=i.drawEntity(t,h),o+=r,t.config.drawn&&((n=e===g-1?t:s[d[e-1]])&&(n.config.drawn=!1,n.config.outlineStartIndex=a),e++),o>=h){i.addJob("entityDraw",l.bind(this,e),w.b.entitydraw);break}e===g&&(i._addEventListenersToEntities(0),i.initComplete())}}},{key:"_addEventListenersToEntities",value:function(e){var t,o,a,n=this,r=n.components.data,i=n.config,l=i.BATCH_SIZE,c=i.entityKeys,s=i.entityLength,h=0;for(t=e;t<s;t++)if((a=(o=r[c[t]]).config.options)&&!1===a.isDataEnabled||n.addMouseGestures(o),++h===l){n.addJob("_addEventListenersToEntities",n._addEventListenersToEntities.bind(this,t),w.b.entitydraw);break}}},{key:"_getDefaultTooltip",value:function(e,t){var o,n,r=e.config.cleanValue,i=e.config.formattedValue,l=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(n=t.labels&&t.labels[0]))return a;o=(l.useSNameInTooltip?n.shortText:n.text)+(null===r?"":l.tooltipSepChar+i)}else o=(l.useSNameInTooltip?t.shortLabel:t.label)+(null===r?"":l.tooltipSepChar+i);return o}},{key:"drawEntity",value:function(e,t){var o,n,r,i,l,c,s,h,d=this,u=d.getFromEnv("chart"),f=u.getFromEnv("animationManager"),b=e.config,p=g.ib||!E?"litepath":"path",m=u.config.entityOpts,v=b.outlines,y=d.getFromEnv("toolTipController"),k=this.getLinkedParent().getChildContainer("plot"),O=this.getLinkedParent().getChildContainer("plotShadow"),C=b.toolText,j=m.shadow,x=[],A={};if(d._configureEntityDrawingParams(e),n=(b=e.config).visibleEntityAttr,h=b.shadowOptions,o=b.outlineStartIndex===a?v.length:b.outlineStartIndex,e.graphics||(e.graphics={}),c=0,x=b.outlinePath||(b.outlinePath=[]),s=b.customStrokeWidthModifier,"object"==typeof b.options){for(;o--;)if(x=v[o].outline,r=!0===b.options.isDataEnabled?n:Object(g.T)(Object(g.T)({},n),B(v[o].style,s)),(i=e.graphics.outlines)||(i=e.graphics.outlines=[]),i[o]||(i[o]={}),l=i[o].outline,r[p]=x,(l=i[o].outline=f.setAnimation({el:p,container:k,attr:r,component:d,label:"path"})).shadow(!!j&&h,O),y.enableToolTip(l,C),c++,b.outlineStartIndex=o,c===t)return c;return b.drawn=!0,c}for(;o--;)if(x=v[o].concat(x),c++,b.outlineStartIndex=o,c===t)return b.outlinePath=x,c;return e.graphics.outlines||(n[p]=x),Object.assign(A,n,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=f.setAnimation({el:e.graphics.outlines||p,container:k,attr:A,component:d,label:"path"}),b.drawn=!0,b.outlineStartIndex=0,b.outlinePath=[],e.graphics.outlines.shadow(!!j&&h,O),y.enableToolTip(e.graphics.outlines,C),c}},{key:"_configureEntityDrawingParams",value:function(e){var t,o=this.getFromEnv("chart"),a=e.config,n=o.config.entityOpts,r=o.config.scalingParams,i=!E||g.ib,l=r.scaleFactor,c=r.strokeWidth,s=(i?o.baseScaleFactor:1)*c,h=1===n.scaleBorder,d=a.borderThickness,u=a.alphaArr,f=a.origConnectorThickness,b=a.hoverBorderThickness,p=a.visibleEntityAttr,m=p["fill-opacity"];a.shadowOptions={scalefactor:[l,l*o.config.baseScaleFactor],opacity:T.apply(S,u)/100,useFilter:0},a.fillOpacity=e.hidden?0:m,i?(d=a.entityBorderThickness=h?d*s:d/l,f/=l,t=h?l:r.sFactor,b&&(b=a.hoverBorderThickness=h?b*s:b/l)):(d=h?d*c:d,t=h?r.scaleFactor:o.baseScaleFactor),a.entityBorderThickness=d,a.connectorThickness=f,a.customStrokeWidthModifier=t,p["stroke-width"]=d,p.transform=g.ib||!E?"":r.transformStr}},{key:"drawLabels",value:function(e){var t,o,a,n,r=this,i=e,l=r.getFromEnv("chart"),c=r.config,s=c.labelBatchSize,h=c.entityLength,d=[],g=l.getChildContainer("upperAnnotationGroup"),u=0,f=r.getChildren("mapLabelAnnotations")&&r.getChildren("mapLabelAnnotations")[u],b=0,p=0,m=l.getFromEnv("toolTipController"),v=l.config.annotationConfig;for(t in f||(n=new O.a,r.attachChild(n,"mapLabelAnnotations"),(f=r.getChildren("mapLabelAnnotations")[u]).addCustomGroup(g)),f.clear(),f._renderer&&(f._renderer=null),v.showbelow=0,i){if(r.drawLabel(i[t],d),++b===s){for(f.annotation.injectDependency("paper",l.getFromEnv("paper")),f.annotation.injectDependency("toolTipController",m),o=0;o<d.length;o++)d[o].animationLabel="entityLabel";for(a=f.addGroup(Object.assign(v,{id:"entityLabels"+u,items:d,animationLabel:"entityLabelGroup"}),r),l.config.labelsOnTop&&a.store.element.toFront(),o=0;o<a.items.length;o++)a.items[o].addEventListener("fc-mouseover",d[o].onmouseover),a.items[o].addEventListener("fc-mouseout",d[o].onmouseout),a.items[o].addEventListener("fc-click",d[o].onclick);u++,(f=r.getChildren("mapLabelAnnotations")&&r.getChildren("mapLabelAnnotations")[u])||(n=new O.a,r.attachChild(n,"mapLabelAnnotations"),(f=r.getChildren("mapLabelAnnotations")[u]).addCustomGroup(g)),f.clear(),f._renderer&&(f._renderer=null),b=0,d=[]}else if(p==h-1){for(f.annotation.injectDependency("paper",l.getFromEnv("paper")),f.annotation.injectDependency("toolTipController",m),o=0;o<d.length;o++)d[o].animationLabel="entityLabel";for(a=f.addGroup(Object.assign(v,{id:"entityLabels"+u,items:d,animationLabel:"entityLabelGroup"}),r),l.config.labelsOnTop&&a.store.element.toFront(),o=0;o<a.items.length;o++)a.items[o].addEventListener("fc-mouseover",d[o].onmouseover),a.items[o].addEventListener("fc-mouseout",d[o].onmouseout),a.items[o].addEventListener("fc-click",d[o].onclick)}p++}r.drawLabelConnFn(0)}},{key:"drawLabelConnFn",value:function(e){var t,o,a,n,r,i=this,l=i.config,c=i.components.data,s=l.BATCH_SIZE,h=l.entityKeys,d=h.length,g=0;for(o=e;o<d;o++){if("object"==typeof(n=(r=c[h[o]]).config).options)for(t=(a=n.labels)&&a.length||0;t--;)a[t].labelConnectors&&(i.drawLabelConnectors(r,a[t].labelConnectors,i),g++);else n.labelConnectors&&(i.drawLabelConnectors(r,n.labelConnectors,i),g++);if(g===s){i.addJob("drawLabelConnectors",i.drawLabelConnFn.bind(this,o),w.b.entitydraw);break}}}},{key:"_getLabelObject",value:function(e,t,o){var n,r,i,l,c,s,h,d,g,u,f,b=this,p=b.getFromEnv("chart"),m=e.config,v=p.config.scalingParams,y=e.graphics&&e.graphics.outlines,k=m.fontSize,O=m.labelPadding,C=m.labels||[],j=m.entityLabels||[];return t===a?(n=e.labelConfig,r=m.labelPosition,i=m.labelAlignment):(f=C[t],l=(n=j[t].config).style=f.style,r=f.labelPosition,i=f.labelAlignment),r?(c=r[0],s=r[1]):(c=(h=y.getBBox()).x+h.width/2,s=h.y+h.height/2),i?("right"===(d=i[0])?c-=O:"left"===d&&(c+=O),"top"===(g=i[1])?s-=O:"bottom"===g&&(s+=O)):(d="center",g="middle"),u=parseFloat(k)/v.sFactor,!o&&l&&(l.color&&(n.fontColor=l.color),l["font-size"]&&(u=parseFloat(l["font-size"])/v.sFactor),l["font-family"]&&(n.fontFamily=l["font-family"]),l["font-weight"]!==a&&(n.fontBold="bold"===l["font-weight"])),n.x=c.toString(),n.y=s.toString(),n.wrap=1,n.type="text",n.fontSize=u,{x:c.toString(),y:s.toString(),wrapwidth:D[d](void 0,c+void 0)-O,wrapheight:V[g](void 0,s+void 0)-O,wrap:1,type:"text",align:n.align,valign:n.vAlign,text:n.displayValue,tooltext:n.toolText,css:n.link!==a&&{cursor:"pointer",_cursor:"hand"},bgcolor:n.bgColor,bordercolor:n.borderColor,fillcolor:n.fontColor,fontsize:n.fontSize,font:n.fontFamily,bold:n.fontBold,onclick:function(t){var o,a,n=e.graphics.outlines;if(n instanceof Array)for(o=0,a=n.length;o<a;o++)b.entityClick(n[o].outline,t);else b.entityClick(n,t)},onmouseover:function(t){var o,a,n=e.graphics.outlines;if(n instanceof Array)for(o=0,a=n.length;o<a;o++)b.entityRollOver(n[o].outline,t);else b.entityRollOver(n,t)},onmouseout:function(t){var o,a,n=e.graphics.outlines;if(n instanceof Array)for(o=0,a=n.length;o<a;o++)b.entityRollOut(n[o].outline,t);else b.entityRollOut(n,t)},ontouchstart:function(t){var o,a,n=e.graphics.outlines;if(n instanceof Array)for(o=0,a=n.length;o<a;o++)b.entityRollOver(n[o].outline,t);else b.entityRollOver(n,t);b.entityRollOver(n,t)}}}},{key:"drawLabel",value:function(e,t){var o,n,r,i=e.config;if(i.showLabel)if("object"==typeof i.options)for(n=(r=i.labels)&&r.length||0,o=i.options.isDataEnabled;n--;)t.push(this._getLabelObject(e,n,o,!n));else t.push(this._getLabelObject(e,a,!0,!0))}},{key:"drawLabelConnectors",value:function(e,t,o){for(var a,n,r=e.config,i=this.getFromEnv("chart"),l=i.getFromEnv("animationManager"),c=i.config.scalingParams,s=o.getLinkedParent().getChildContainer("plot"),h=t&&t.length||0,d=r.showLabel;h--;)n=t[h],a=e.graphics.connectorElem,d?e.graphics.connectorElem=a=l.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:n,opacity:1,transform:g.ib||!E?"":c.transformStr,stroke:Object(k.c)(r.connectorColor,r.connectorAlpha),"shape-rendering":"crisp","stroke-width":r.connectorThickness},container:s,component:this,label:"labelConnectors"}):a&&a.hide()}},{key:"entityClick",value:function(e,t){var o=e.node.__entity,n=this.getFromEnv("chart"),r=n.config.scalingParams,i=o.graphics.outlines.getBBox(),l=n.getFromEnv("linkClickFN"),c=o.config,s=c.link;i.width*=r.scaleFactor,i.height*=r.scaleFactor,i.x=i.x*r.scaleFactor+r.translateX,i.y=i.y*r.scaleFactor+r.translateY,i.x2=i.x+i.width,i.y2=i.y+i.height,n.fireChartInstanceEvent("entityclick",c.eventArgs,t),s!==a&&l.call({link:s,entity:o,entityBox:i},!0)}},{key:"entityRollOver",value:function(e,t){var o=e.node.__entity,a=o.config,n=this.getFromEnv("chart"),r=n.getFromEnv("animationManager"),i=a.hoverAttr;n.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):a.useHoverColor&&a.isVisible&&!o.hidden&&i&&(n.config.hoverEntity=e,r.setAnimation({el:e,attr:i,component:this,state:"updating",label:"path"}),e.data("hovered",!0))}},{key:"entityRollOut",value:function(e,t){var o=e.node.__entity,a=this,n=a.getFromEnv("chart"),r=n.getFromEnv("animationManager"),i=o.config.revertAttr;n.plotEventHandler(e,t,"entityRollOut"),o.config.timer=setTimeout(function(){!0!==o.hidden&&i&&(r.setAnimation({el:e,attr:i,component:a,state:"updating",label:"path"}),e.data("hovered",!1))},100)}},{key:"addMouseGestures",value:function(e){var t,o,n,r,i=e.config,l=i.originalId,c=this,s=e.graphics,h=i.useHoverColor,d=i.hoverBorderThickness,u=i.hoverBorderColor,f=i.hoverBorderAlpha,b=i.entityBorderThickness,p=i.borderColor,m=i.borderAlpha,v=i.link,y=i.visibleEntityAttr,O=function(t){v!==a&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",i.eventArgs),t.data("groupId","groupId"+l),t.node.__entity=e,e._listenersBinded||t.on("fc-click",c.entityClick.bind(c,t)).hover(c.entityRollOver.bind(c,t),c.entityRollOut.bind(c,t))};for(t in i.eventArgs={value:i.cleanValue,label:i.label,shortLabel:i.shortLabel,originalId:i.origId,id:i.id||i.origId},i.legacyEventArgs={value:i.value,lName:i.label,sName:i.shortLabel,id:i.originalId||i.id},h&&(i.hoverAttr={fill:Object(g.Lb)(i.hoverColor)},i.revertAttr={fill:Object(g.Lb)(i.fillColor),stroke:Object(g.Lb)(i.borderColor,i.borderAlpha)},i.revertAttr["fill-opacity"]=y["fill-opacity"],d!==b&&(i.hoverAttr["stroke-width"]=Object(g.Ab)(d,b),i.revertAttr["stroke-width"]=b),(u!==p||f!==m)&&(i.hoverAttr.stroke=Object(k.c)(u,f),i.revertAttr.stroke=Object(k.c)(p,m))),s)if(s.hasOwnProperty(t))if(s[t]instanceof Array){for(o=0,n=(r=s[t]).length;o<n;o++)O(r[o].outline);e._listenersBinded=!0}else O(s[t]),e._listenersBinded=!0}},{key:"getDataLimits",value:function(){var e=this.config;return{max:e.max,min:e.min}}},{key:"initComplete",value:function(){var e=this.getFromEnv("chart"),t=this.components.data;this.drawLabels(t),e.config.entitiesReady=!0,e.checkComplete()}}],[{key:"setCustomAttrs",value:function(e,t){e&&e.graphics.outlines.attr(t)}},{key:"_sanitizeEntityOptions",value:function(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e}},{key:"_getKeys",value:function(e,t){for(var o=[e],a=e;t[a];)a=t[a].nextId,o.push(a);return o}}]),t}(p.a),G=function(e,t,o,a,n){var r=Math.pow;return r(o-e,2)+r(a-t,2)<=r(n,2)},H=Math.PI,W=Math.cos,z=Math.sin,X=Math.max,K=Math.min,Y=H/180,J=function(e,t,o,a,n,r){var i,l,c;return i=(a-t)*(n-o),l=(o-e)*(r-a),isNaN(i)&&(i=0),isNaN(l)&&(l=0),0===(c=i-l)?0:0<c?1:2},U=function(e,t,o,a,n,r){return!!(o<=X(e,n)&&o>=K(e,n)&&a<=X(t,r)&&a>=K(t,r))},Z=function(e,t,o,a,n,r,i,l){var c=J(e,t,o,a,n,r),s=J(e,t,o,a,i,l),h=J(n,r,i,l,e,t),d=J(n,r,i,l,o,a);return!(c===s||h===d)||!(0!==c||!U(e,t,n,r,o,a))||!(0!==s||!U(e,t,i,l,o,a))||!(0!==h||!U(n,r,e,t,i,l))||!(0!==d||!U(n,r,o,a,i,l))},q=function(e,t,o,a,n,r,i){var l,c,s,h,d,g,u,f=0,b=!1;if(G(e,t,o,a,n)&&3<=r){for(c=void 0===i?.5*H:function(e){return e%360*Y}(i),u=2*H/r,s=o+n*W(-c),g=a+n*z(-c),l=0;l<r;l++){if(h=o+n*W(-(c+=u)),d=a+n*z(-c),Z(s,g,h,d,e,t,1/0,t)){if(0===J(s,g,e,t,h,d))return U(s,g,e,t,h,d);f++}s=h,g=d}b=0!=f%2}return b},Q=function(e,t){return!e||e&&t&&t.i>e.i?t:e};var $=function(){function e(t){Object(i.a)(this,e);this.configure(t)}return Object(n.a)(e,[{key:"configure",value:function(e){var t=this;t.validatorFn=e?t.shapeValidator():t.defaultValidator()}},{key:"defaultValidator",value:function(){var e=Math.pow,t=this;return function(o){var a=t.mousePoint;return!!(o&&1>=e((o.x-a.x)/t.xLimit,2)+e((o.y-a.y)/t.yLimit,2))}}},{key:"shapeValidator",value:function(){var e=this;return function(t){var o,a,n,r,i,l,c,s,h,d=e.mousePoint,g=t&&t.shapeInfo,u=!1,f=d.x,b=d.y;return"circle"===(o=g&&g.type)?(n=g.radius,u=G(f,b,t.x,t.y,n)):"arc"===o?(a=g.innerradius,n=g.radius,u=!G(f,b,t.x,t.y,a)&&G(f,b,t.x,t.y,n)):"polygon"===o?(n=g.radius,i=g.startAngle,r=g.sides,u=q(f,b,t.x,t.y,n,r,i)):"rect"===o||"rectangle"===o?(l=t.x,s=t.y,c=l+(g.width||0),h=s+(g.height||0),u=f>=l&&f<=c&&b>=s&&b<=h):"default"===o&&(u=!1),u}}},{key:"buildKdTree",value:function(e){return this.kdTree=function(e){function t(e,t,o){var a=e[t];e[t]=e[o],e[o]=a}var o,a,n,r=e&&e[0]&&e[0].r||5,i=Math.max,l=Math.floor,c=Math.sqrt,s=Math.min,h=Math.log,d=Math.exp,g=Math.pow;for(a=function(e,o,n,r){for(var g,u,f,b,p,m,v,y,k,O;r>n;){for(600<r-n&&(u=o-n+1,f=h(g=r-n+1),b=.5*d(2*f/3),p=.5*c(f*b*(g-b)/g)*(0>u-g/2?-1:1),m=i(n,l(o-u*b/g+p)),v=s(r,l(o+(g-u)*b/g+p)),a(e,o,m,v)),y=e[o],k=n,O=r,t(e,n,o),e[r].x>y.x&&t(e,n,r);k<O;){for(t(e,k,O),k++,O--;e[k].x<y.x;)k++;for(;e[O].x>y.x;)O--}e[n].x===y.x?t(e,n,O):t(e,++O,r),O<=o&&(n=O+1),o<=O&&(r=O-1)}},n=function(e,o,a,r){for(var g,u,f,b,p,m,v,y,k,O;r>a;){for(600<r-a&&(u=o-a+1,f=h(g=r-a+1),b=.5*d(2*f/3),p=.5*c(f*b*(g-b)/g)*(0>u-g/2?-1:1),m=i(a,l(o-u*b/g+p)),v=s(r,l(o+(g-u)*b/g+p)),n(e,o,m,v)),y=e[o],k=a,O=r,t(e,a,o),e[r].y>y.y&&t(e,a,r);k<O;){for(t(e,k,O),k++,O--;e[k].y<y.y;)k++;for(;e[O].y>y.y;)O--}e[a].y===y.y?t(e,a,O):t(e,++O,r),O<=o&&(a=O+1),o<=O&&(r=O-1)}},o=(e=e||[]).length;o--;)e[o].r>r&&(r=e[o].r),e[o].i=o,e[o].x=+e[o].x,e[o].y=+e[o].y;return{tree:0===e.length?{}:function e(t,o,r,i){var l,c={},s=i?"y":"x";return o===r?(c.point=t[o],c):1==r-o?(t[o][s]>t[r][s]?(c.point=t[o],c.left={point:t[r]}):(c.point=t[r],c.left={point:t[o]}),c):(l=o+r>>1,i?n(t,l,o,r):a(t,l,o,r),c.point=t[l],c.left=e(t,o,l-1,!i),c.right=e(t,l+1,r,!i),c)}(e,0,e.length-1,!1),search:function(e,t,o,a){function n(e,t,o,a){return c(g(e-o,2)+g(t-a,2))}function i(a,r){return"circle"===o?n(a,r,e,t)<=p:a>=p&&a<=m&&r>=v&&r<=y}function l(e,t,o){return e>=t&&e<=o}function s(o){var a=l(e,o.x1,o.x2)&&l(t,o.y1,o.y2),r=n(e,t,o.point.x,o.point.y);return d?void(a?k?o.point.i>d.point.i&&(d=o,k=a,O=r):(d=o,k=a,O=r):!k&&r<O&&(d=o,k=a,O=r)):(d=o,k=a,void(O=r))}function h(a,n){"circle"===o?p=a:(p=e-a||0,m=e+a||0,v=t-n||0,y=t+n||0)}var d,u,f,b=this.tree,p=e-r,m=e+r,v=t-r,y=t+r,k=!1,O=0;return a=a||{},f=function(e){e&&e.point&&(h(a.rx||e.point.r,a.ry||e.point.r),i(e.point.x,e.point.y)&&s(e),v<=e.point.y&&u(e.left),y>=e.point.y&&u(e.right))},(u=function(e){e&&e.point&&(h(a.rx||e.point.r,a.ry||e.point.r),i(e.point.x,e.point.y)&&s(e),p<=e.point.x&&f(e.left),m>=e.point.x&&f(e.right))})(b),d&&d.point||d}}}(e),this.tree=this.kdTree.tree,this}},{key:"getNeighbour",value:function(e,t,o){var a=this,n=a.tree,r={x1:e.x-a.xLimit,x2:e.x+a.xLimit,y1:e.y-a.yLimit,y2:e.y+a.yLimit},i=a.validatorFn;return a.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,o,e.options):n?a._searchBtwnLimit(r,n,!0,i):void 0}},{key:"_searchBtwnLimit",value:function(e,t,o,a){var n,r,i=o?"x":"y",l=o?e.x1:e.y1,c=o?e.x2:e.y2;if(void 0!==(n=t&&t.point&&t.point[i]))return a(t.point)&&(r=t.point),n>=l&&t.left&&(r=Q(r,this._searchBtwnLimit(e,t.left,!o,a))),n<=c&&t.right&&(r=Q(r,this._searchBtwnLimit(e,t.right,!o,a))),r}},{key:"_setSearchLimit",value:function(e,t){this.xLimit=e,this.yLimit=t}}]),e}();$.prototype.constructor=$;var ee=$,te="top",oe="bottom",ae="right",ne="left",re="middle",ie="center",le=window.Math,ce=le.min,se=le.max,he=function(){var e,t,o=this,a=o.markerShape.getElement(),n=o.dataset.getFromEnv("chart"),r=o.markerShape,i=r.getElement(),l=i.data("unfilteredConfig"),c=l._markerEventArgs,s=i.getBBox(),h=o.config;h.link&&(a.node.style.cursor=g.p),i&&l.hovereffect&&("circle"===r.config.type&&(t={color:l.hoverfillcolor,alpha:l.hoverfillalpha,angle:360-l.hoverfillangle,ratio:l.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===r.config.rawFillPattern},l._hoverattrs.fill=Object(g.Lb)(t)),e=Object(g.T)({},l._hoverattrs),"image"===i.type&&(delete e.fill,delete e.stroke,delete e["stroke-width"]),i.attr(e)),c||(c=l._markerEventArgs={x:s.x,y:s.y,scaledX:s.x/r.groupConfig.scaleX,scaledY:s.y/r.groupConfig.scaleY,chartX:s.x+s.width/2,chartY:s.y+s.height/2,id:l.id,label:l.label}),Object(y.e)(h.options.id,"markerRollOver",c,n.getFromEnv("chartInstance"),h,void 0,void 0,void 0)},de=function(){var e,t=this,o=t.markerShape.getElement(),a=t.dataset.getFromEnv("chart"),n=t.markerShape,r=n.getElement(),i=t.config,l=r.data("unfilteredConfig");o.node.style.cursor="default",r&&l.hovereffect&&("circle"===n.config.type&&(l._defaultattrs.fill=Object(g.Lb)({alpha:n.config.rawAlpha,color:n.config.rawColor,angle:360-n.config.rawAngle,ratio:n.config.rawRatio,radialGradient:"radial"===n.config.rawFillPattern})),e=Object(g.T)({},l._defaultattrs),"image"===r.type&&(delete e.fill,delete e.stroke,delete e["stroke-width"]),r.attr(e)),Object(y.e)(i.id,"markerRollOut",l._markerEventArgs,a.getFromEnv("chartInstance"),void 0,void 0,void 0)},ge=function(e){var t=this,o=t.markerShape.getElement(),a=t.config.options,n=t.dataset,r=n.getFromEnv("chart"),i=t.markerShape,l=i.config,c=o.getBBox(),s=n.getFromEnv("linkClickFN"),h=i.config.link,d=l._markerEventArgs;h&&s&&s.call({link:h},!0),d||(d=l._markerEventArgs={x:c.x,y:c.y,scaledX:c.x/i.groupConfig.scaleX,scaledY:c.y/i.groupConfig.scaleY,chartX:c.x+c.width/2,chartY:c.y+c.height/2,id:a.id,label:a.label}),r.fireChartInstanceEvent("markerClick",d,e)},ue=function(e,t){var o=t?Object(g.T)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=g.Lb,o},fe=function(e,t){var o,a=e&&e.length||!1,n=t||"id",r={};if(!e)return e;for(;a--;)void 0!==(o=e[a])[n]&&(r[o[n].toLowerCase()]=o);return r};Object(j.a)({name:"mapsAnimation",type:"animationRule",extension:A});var be=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).components={},e.getLabelAlignment={top:function(e,t,o){return{x:e.toString(),y:(t-o).toString(),align:ie,valign:te}},left:function(e,t,o){return{x:(e-o).toString(),y:t.toString(),align:ae,valign:re}},right:function(e,t,o){return{x:(e+o).toString(),y:t.toString(),align:ne,valign:re}},bottom:function(e,t,o){return{x:e.toString(),y:(t+o).toString(),align:ie,valign:oe}},center:function(e,t){return{x:e.toString(),y:t.toString(),align:ie,valign:re}}},e.getWrapWidth={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*ce(t,e-t)}},e.getWrapHeight={top:function(){return arguments[1]},middle:function(e,t){return 2*ce(t,e-t)},bottom:function(e,t){return e-t}},e.hoverFn=he,e.hoverOutFn=de,e.clickFn=ge,e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getName",value:function(){return"markers"}},{key:"getType",value:function(){return"dataset"}},{key:"configureAttributes",value:function(e){if(e){this.JSONData=e;var t=this.getFromEnv("chart").config.markerOpts;this.calculateDataLimits(),t.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}}},{key:"calculateMarkerRadiusLimits",value:function(){if(this.JSONData){var e=this,o=e.JSONData,a=e.config,n=e.getFromEnv("chart"),r=n.config.width,i=n.config.height,l=o.markermaxradius,c=o.markerminradius,s=t.getMarkerRadiusLimits(r,i,l,c);a.minRadius=s.min,a.maxRadius=s.max}}},{key:"calculateDataLimits",value:function(){var e,t,o,a,n=this.getFromEnv("chart"),r=this.config,i=(n.jsonData.markers||{}).items||[],l=this.getFromEnv("number-formatter"),c=1/0,s=-1/0;for(a=0,t=i.length;a<t;a++)o=i[a].value,null!==(e=l.getCleanValue(o))&&(c=ce(e,c),s=se(e,s));r.min=c,r.max=s}},{key:"_parseMarkers",value:function(){var e,o,a,n,r,i,l,c,s=this,h=s.getFromEnv("chart"),d=h.jsonData.markers,u=d.items,f=d.shapes,b=h.config.markerOpts,p=this.getFromEnv("number-formatter"),m=s.components.shapeObjs={},v=s.components.markerObjs={};if(u&&u.length){if(f&&f.length)for(o=f.length;o;o-=1)(c=(n=f[o-1]).id.toLowerCase())&&(m[c]=n);for(o=u.length;o--;)(c=(n=u[o]).id&&n.id.toLowerCase())&&(void 0!==(e=n.value)&&""!==e&&(e=parseFloat(e)),(r=(a=t._initializeMarkerItem(c,n,null,h)).config.options.shapeid)&&"string"==typeof r&&(r=r.toLowerCase()),l=(i=a.config).options,i.cleanValue=p.getCleanValue(e),i.formattedValue=null===i.cleanValue?void 0:p.dataLabels(e),i.fillColor=Object(g.yb)(l.fillcolor,l.color,b.fillColor),i.fillAlpha=Object(g.yb)(l.fillalpha,l.alpha,b.fillAlpha),i.fillRatio=Object(g.yb)(l.fillratio,b.fillRatio),i.fillAngle=Object(g.yb)(l.fillangle,b.fillAngle),i.borderThickness=Object(g.Ab)(l.borderthickness,b.borderThickness),i.borderColor=Object(g.yb)(l.bordercolor,b.borderColor),i.borderAlpha=Object(g.yb)(l.borderalpha,b.borderAlpha),i.labelPadding=l.labelpadding||b.labelPadding,a.dataset=s,n.__hideMarker&&(a._isHidden=!0),r&&(a.shapeObj=m[r]),v[c]=a)}}},{key:"defineMarkersNShapes",value:function(){var e,o,a,n,r,i,l,c,s=this,h=s.getFromEnv("chart"),d=h.jsonData.markers,u=d.definition,f=this.getFromEnv("number-formatter"),b=h.config.markerOpts,p=fe(u)||{},m=fe(d.application)||{},v=d.shapes,y=s.components.shapeObjs=s.components.shapeObjs||(s.components.shapeObjs={}),k=s.components.markerObjs=s.components.markerObjs||(s.components.markerObjs={});if(u&&u.length){if(v&&v.length)for(n=v.length;n;n-=1)(c=(i=v[n-1]).id.toLowerCase())&&(y[c]=i);for(c in p)i=p[c],(r=k[c]=t._initializeMarkerItem(c,i,m[c],h)).dataset=s,l=r.config.options.shapeid,o=r.config,a=i.value,o.cleanValue=f.getCleanValue(a),e=o.options,o.formattedValue=null===o.cleanValue?void 0:f.dataLabels(a),o.fillColor=Object(g.yb)(e.fillcolor,e.color,b.fillColor),o.fillAlpha=Object(g.yb)(e.fillalpha,e.alpha,b.fillAlpha),o.fillRatio=Object(g.yb)(e.fillratio,b.fillRatio),o.fillAngle=Object(g.yb)(e.fillangle,b.fillAngle),o.borderThickness=Object(g.Ab)(e.borderthickness,b.borderThickness),o.borderColor=Object(g.yb)(e.bordercolor,b.borderColor),o.borderAlpha=Object(g.yb)(e.borderalpha,b.borderAlpha),o.labelPadding=e.labelpadding||b.labelPadding,o.options.tooltext=Object(g.yb)(e.tooltext,b.tooltext),o.link=e.link,l&&(r.shapeObj=y[l.toLowerCase()])}}},{key:"getDataLimits",value:function(){var e=this.config;return{min:e.min,max:e.max}}},{key:"configureConnectors",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,u,f,b=this,p=b.getFromEnv("chart"),m=p.jsonData,v=b.components,y=m.markers||{},k=y.connector||y.connectors||[],O=v.markerObjs,C=k.length,j=b.components.connectors,x=function(e){return function(t){var o=this.getElement(),a=o.data("unfilteredConfig");o&&a.hoverEffect&&o.attr(a._hoverAttrs),p.fireChartInstanceEvent("connectorrollover",e,t)}},A=function(e){return function(t){var o=this.getElement(),a=o.data("unfilteredConfig");o&&a.hoverEffect&&o.attr(a._defaultAttrs),p.fireChartInstanceEvent("connectorrollout",e,t)}},w=function(e){return function(t){p.fireChartInstanceEvent("connectorClick",e,t)}},F=p.config.connectorOpts,L={};for(j=b.components.connectors=[],f=0;f<C;f++)((u=k[f]).from||u.to)&&(t=O[u.from.toLowerCase()],o=O[u.to.toLowerCase()],t&&o)&&(a=k[f].label,(L=j[f])||(L=j[f]={}),L.config||(e=L.config={}),L.graphics||(L.graphics={}),(e=L.config=Object(g.T)({},u)).fromMarker=t,e.toMarker=o,e.link=u.link,e.showTooltip=Object(g.Ab)(u.showtooltip,F.showTooltip),n=e.tooltext=e.showTooltip?Object(g.yb)(u.tooltext,F.tooltext):"",r=e.thickness=Object(g.yb)(u.thickness,F.thickness),i=e.color=Object(g.yb)(u.color,F.color),l=e.alpha=Object(g.yb)(u.alpha,F.alpha),e.hoverEffect=Object(g.Ab)(u.showhovereffect,F.showHoverEffect),c=Object(g.yb)(u.hovercolor,F.hoverColor,i),s=Object(g.yb)(u.hoveralpha,F.hoverAlpha,l),h=Object(g.yb)(u.hoverthickness,F.hoverThickness,r),e.dashed=Object(g.yb)(u.dashed,F.dashed),e.dashLen=Object(g.Ab)(u.dashlen,F.dashlen),e.dashGap=Object(g.Ab)(u.dashgap,F.dashgap),n&&(e.tooltext=n=Object(g.wb)(Object(g.vb)(n,[3,40,41,42,43],{label:a,fromId:t.config.definition.id,toId:o.config.definition.id,fromLabel:t.config.definition.label,toLabel:o.config.definition.label},void 0))),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:o.config.id,label:a},e._hoverAttrs={stroke:ue({color:c,alpha:s}).toString(),"stroke-width":h},e._defaultAttrs={stroke:ue({color:i,alpha:l}).toString(),"stroke-width":r},e.type="line",e.onclick=w(e.eventArgs),e.onmouseover=x(e.eventArgs),e.onmouseout=A(e.eventArgs),a&&(!(d=L.labelConfig)&&(d=L.labelConfig={}),d.type="text",d.text=a,d.align=ie,d.valign=re,d.font=F.font,d.fillcolor=F.fontColor,d.bgcolor=F.labelBgColor,d.bordercolor=F.labelBorderColor,d.tooltext=e.tooltext))}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s=this,h=s.getFromEnv("chart"),d=s.config,g=h.getChildren("mapAnnotations")[0],u=s.components.markerObjs,f=h.config,b=f.markerOpts,p=f.scalingParams,m=h.config.annotationConfig,v=s.getFromEnv("toolTipController"),y=h.getDatasets()[0],k=[],O=[],C={};for(n in this._drawConnectors(),s.imageLoadCount=0,s.imageCount=0,c=g.addGroup(Object.assign(m,{id:"markers",fillalpha:"100",items:k,scaleimages:1}),s),l=g.addGroup(Object.assign(m,{id:"markerLabels",items:O,scaleimages:1}),s),f.labelsOnTop&&y.getChildren("mapLabelAnnotations")&&y.getChildren("mapLabelAnnotations")[0].annotation.groups[0].store.element.toFront(),s.components.markerGroup=c,s.components.markerLabelGroup=l,d.autoScale=b.autoScale?p.sFactor:1,u)e=null,(a=(t=u[n]).config).conIsHidden||(e=this._drawMarkerItem.call(t)),e&&(a._annotationIndex=k.length,C[n]=t,e.markerShape&&(o=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},e.markerShape),t.markerShape=g.addItem(c.getId(),o,!0,s)),(r=t.markerShape&&t.markerShape.getElement())&&(v.enableToolTip(r,t.config.tooltext),r.data("unfilteredConfig",o)),k.push(t.markerShape),e.markerLabel&&(o=Object.assign({animationLabel:"markerItem"},e.markerLabel),t.markerLabel=g.addItem(l.getId(),o,!0,s),(i=t.markerLabel&&t.markerLabel.getElement())&&i.data("unfilteredConfig",o)),O.push(t.markerLabel));s.addJob("buildKdtree",s._buildKdTree.bind(s),w.b.kdTree)}},{key:"_buildKdTree",value:function(){var e,t,o=this,a=o.components.kdArrayMap,n=o.components.markerGroup,r=[],i=n&&n.items,l=i&&i.length||0;for(t=0;t<l;t++)a[e=i[t].config.id]&&r.push(a[e]);o.components.kDTree||(o.components.kDTree=new ee(!0)),o.components.kDTree._setSearchLimit(1/0,1/0),o.components.kDTree.buildKdTree(r)}},{key:"_drawMarkerItem",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,u,f,b,p,m,v,y,O,C=this,j=C.dataset,x=j.getFromEnv("chart"),A=x.config,w=j.config,F=A.scalingParams,L=C.config,E=L.options,S=L.definition,_=A.markerOpts,T=_.dataLabels.style,I=E.shapeid,P=E.scale||1,R=E.label||"",M=x.config.scalingParams.scaleFactor*x.config.baseScaleFactor,B=(E.labelpos||te).toLowerCase(),D=void 0===L.formattedValue?void 0:L.formattedValue,V=E.tooltext||_.tooltext,N=Object(g.Ab)(S.radius,L.radius,_.radius)*P*w.autoScale||1e-4,G=L.fillColor,H=L.fillAlpha,W=L.fillRatio,z=L.fillAngle,X=L.borderThickness,K=L.borderColor,Y=L.borderAlpha,J=j.components.kdArrayMap||(j.components.kdArrayMap={}),U=C.config.id;if(L.autoScale=_.autoScale?M:1,I)return V=V?Object(g.wb)(Object(g.vb)(V,[1,2,3],{formattedValue:D,label:R},E)):D?R+_.tooltipSepChar+D:R,void 0!==D&&null!==D?R=R+_.labelSepChar+D:isNaN(P)?P=1:0>P?P=0:5<P&&(P=5),Object(g.T)(E,{x:E.x&&E.x.toString(),y:E.y&&E.y.toString(),fillcolor:G,fillalpha:H,fillratio:W,fillangle:z,borderthickness:X,bordercolor:K,borderalpha:Y,hovereffect:Object(g.yb)(_.showHoverEffect),radius:N&&N.toString(),link:E.link,showshadow:Object(g.Ab)(E.showshadow,L.shadow),_markerLabel:R,_markerId:E.id,id:(E.id+"").toLowerCase()}),delete E.tooltext,L.tooltext=!!_.showTooltip&&V,b=+E.x*F.sFactor+F.translateX,p=+E.y*F.sFactor+F.translateY,N=E.radius,"triangle"===I?(Object(g.T)(E,{type:"polygon",sides:3,startangle:_.startAngle}),O="polygon",y=3):"diamond"===I?(Object(g.T)(E,{type:"polygon",sides:4,startangle:_.startAngle}),O="polygon",y=4):"arc"===I?(v=.6*N,Object(g.T)(E,{type:"arc",startangle:0,endangle:360,innerradius:v}),O="arc"):"circle"===I?(E.type="circle",O="circle"):(h=j.getShapeArgs.call(C),_.dataEnabled&&_.valueToRadius&&void 0!==E.radius?delete h.radius:(!h.radius&&(h.radius=_.radius),h.radius*=P*L.autoScale),Object(g.T)(E,h),E.id=E._markerId&&E._markerId.toLowerCase(),v=h.innerradius,h.radius&&(N=h.radius),O=h.type&&h.type.toLowerCase(),y=h.sides,(N=+N)&&v&&N<v&&(f=N,E.radius=N=v,E.innerradius=v=f)),E.type=E.type&&E.type.toLowerCase(),Object(g.T)(E,{hoverfillcolor:Object(g.yb)(E.fillhovercolor,_.hoverFillColor,E.fillcolor),hoverfillalpha:Object(g.yb)(E.fillhoveralpha,_.hoverFillAlpha,E.fillalpha),hoverfillratio:Object(g.yb)(E.fillhoverratio,_.hoverFillRatio,E.fillratio),hoverfillangle:Object(g.yb)(E.fillhoverangle,_.hoverFillAngle,E.fillangle),hoverborderthickness:Object(g.Ab)(E.borderhoverthickness,_.hoverBorderThickness,E.borderthickness),hoverbordercolor:Object(g.yb)(E.borderhovercolor,_.hoverBorderColor,E.bordercolor),hoverborderalpha:Object(g.yb)(E.borderhoveralpha,_.hoverBorderAlpha,E.borderalpha)}),d={alpha:E.fillalpha,color:E.fillcolor,angle:360-E.fillangle,ratio:E.fillratio},u={alpha:E.hoverfillalpha,color:E.hoverfillcolor,angle:360-E.hoverfillangle,ratio:E.hoverfillratio},E._defaultattrs={fill:Object(g.Lb)(d),"stroke-width":"0"===E.showborder?0:E.borderthickness,stroke:Object(k.c)(E.bordercolor,E.borderalpha)},E._hoverattrs={fill:Object(g.Lb)(u),"stroke-width":"0"===E.showborder?0:E.hoverborderthickness,stroke:Object(k.c)(E.hoverbordercolor,E.hoverborderalpha)},"image"===E.type?(E.borderthickness=E.borderthickness||0,E.onload=function(e){var t=this.config,o=e.width,a=e.height,n={},r=(+t.x-o/(2*F.sFactor))*F.sFactor,i=(+t.y-a/(2*F.sFactor))*F.sFactor;(n=J[U]||(J[U]={})).x=r+F.translateX,n.y=i+F.translateY,n.element=C,n.shapeInfo={type:"rect",width:o,height:a},o&&a&&this.getElement().attr({x:r,y:i,width:o,height:a}),j.imageLoadCount++,j.imageLoadCount===j.imageCount&&j._buildKdTree()},E.onerror=function(){j.imageLoadCount++,j.imageLoadCount===j.imageCount&&j._buildKdTree()},j.imageCount++):((m=J[U]||(J[U]={})).x=b,m.y=p,m.element=C,m.shapeInfo={type:O,sides:y,radius:+N+E.borderthickness/2,innerradius:v}),L.drawOptions.shape=E,_.showLabels?(s=E.labelpadding||_.labelPadding,t=(e=j._getLabelOptions(B,s,E)).align,o=e.valign,a=L._labelBaseWidth,n=L._labelBaseHeight,r=L._labelXOffset,i=L._labelYOffset,(l=_.labelWrapWidth?_.labelWrapWidth:j.getWrapWidth[t](a,+e.x+r))>s&&(l-=s),(c=_.labelWrapHeight?_.labelWrapHeight:j.getWrapHeight[o](n,+e.y+i))>s&&(c-=s),L.drawOptions.label=Object(g.T)({type:"text"},{text:R,tooltext:E.tooltext,x:e.x,y:e.y,align:t,valign:e.valign,wrap:1,wrapwidth:l,wrapheight:c,fontsize:T.fontSize/F.sFactor,font:T.fontFamily,fillcolor:T.fontColor}),{markerShape:E,markerLabel:L.drawOptions.label}):{markerShape:E}}},{key:"highlightPoint",value:function(e,t){var o=e.element,a=this,n=t.originalEvent,r=a.getFromEnv("chart"),i=a.getFromEnv("toolTipController"),l=a.config.currentToolTip,c=r.config.lastHoveredPoint;c&&c!==e&&(c&&a.hoverOutFn.call(c.element),r.config.lastHoveredPoint=null,i.hide(l)),!1===e||("click"===t.type||"touchstart"===t.type?(r.config.lastHoveredPoint!==e&&a.hoverFn.call(o),a.clickFn.call(o,t)):"mousemove"===t.type&&r.config.lastHoveredPoint!==e&&a.hoverFn.call(o),o.config.tooltext&&(l?i.draw(n,o.config.tooltext,l):l=a.config.currentToolTip=i.draw(n,o.config.tooltext)),r.config.lastHoveredPoint=e)}},{key:"_drawConnectors",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g=this,u=g.getFromEnv("chart"),f=u.config.annotationConfig,b=g.components.connectors||(g.components.connectors=[]),p=b.length,m=u.config.scalingParams,v=u.config.connectorOpts,y=v.showLabels,k=u.getChildren("mapAnnotations")[0],O=[],C=[],j=[];for(j.push({id:"connectorLabels",fillalpha:"100",items:C}),j.push({id:"connectors",fillalpha:"100",items:O}),k.addGroup(Object.assign(f,j[1]),g),k.addGroup(Object.assign(f,j[0]),g),o=0;o<p;o++)b[o]&&(s=b[o].config.fromMarker.config,h=b[o].config.toMarker.config,r=s.options.x,i=s.options.y,l=h.options.x,c=h.options.y,b[o].config.x=r,b[o].config.y=i,b[o].config.tox=l,b[o].config.toy=c,O.push(b[o].config),d=Object.assign({animationLabel:"markerItem"},b[o].config),(a=(e=k.addItem("connectors",d,!0,g)).getElement())&&a.data("unfilteredConfig",d),e.addEventListener("fc-mouseover",b[o].config.onmouseover),e.addEventListener("fc-mouseout",b[o].config.onmouseout),e.addEventListener("fc-click",b[o].config.onclick),b[o].labelConfig&&y&&(b[o].labelConfig.x=((+r+ +l)/2).toString(),b[o].labelConfig.y=((+i+ +c)/2).toString(),b[o].labelConfig.fontsize=v.fontSize/(m.scaleFactor*u.config.baseScaleFactor),C.push(b[o].labelConfig),d=Object.assign({animationLabel:"markerItem"},b[o].labelConfig),(n=(t=k.addItem("connectorLabels",d,!0,g))&&t.getElement())&&n.data("unfilteredConfig")))}},{key:"getShapeArgs",value:function(){var e,t=this.config,o=Object(g.T)({},this.shapeObj);return t.autoScale=1,o?("polygon"===o.type?3>o.sides?o.type="circle":o.startangle=t.startAngle:"arc"===o.type&&(e=(o.radius||t.markerRadius)*t.autoScale,o.radius=e,o.innerradius=o.innerradius&&o.innerradius*t.autoScale||.6*e),o):null}},{key:"_getLabelOptions",value:function(e,t,o,a,n){var r,i,l,c=e&&e.toLowerCase();return this.getLabelAlignment[c]||(c="center"),i=+o.x,l=+o.y,r=+(r=void 0===a||void 0===n?o.radius||0:/^(top|bottom)$/gi.test(c)&&.5*n||/^(left|right)$/gi.test(c)&&.5*a||0)+ +t,this.getLabelAlignment[c](i,l,r)}},{key:"addMarkerItem",value:function(e){var o,a,n,r,i,l,c,s,h,d=this,u=d.getFromEnv("chart"),f=e,b=d.components.markerObjs,p=d.components.shapeObjs,m=d.components.markerGroup,v=d.components.markerLabelGroup,y=u.getChildren("mapAnnotations")[0],k=d.getFromEnv("number-formatter"),O=u.config.markerOpts;if(h=f.id.toLowerCase()){if(b[h])return;delete f.value,d.imageLoadCount=0,(o=t._initializeMarkerItem(h,f,null)).dataset=d,s=o.config.options.shapeid,i=o.config,c=f.value,i.cleanValue=k.getCleanValue(c),e=i.options,i.formattedValue=null===i.cleanValue?void 0:k.dataLabels(c),i.fillColor=Object(g.yb)(e.fillcolor,e.color,O.fillColor),i.fillAlpha=Object(g.yb)(e.fillalpha,e.alpha,O.fillAlpha),i.fillRatio=Object(g.yb)(e.fillratio,O.fillRatio),i.fillAngle=Object(g.yb)(e.fillangle,O.fillAngle),i.borderThickness=Object(g.Ab)(e.borderthickness,O.borderThickness),i.borderColor=Object(g.yb)(e.bordercolor,O.borderColor),i.borderAlpha=Object(g.yb)(e.borderalpha,O.borderAlpha),i.labelPadding=e.labelpadding||O.labelPadding,i.options.tooltext=Object(g.yb)(e.tooltext,O.tooltext),i.link=e.link,s&&(o.shapeObj=p[s&&s.toLowerCase()]),b[h]=o,r=d._drawMarkerItem.call(o),m&&v&&(r.markerShape&&(l=Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},r.markerShape),o.markerShape=y.addItem(m.getId(),l,!0,d),(a=o.markerShape&&o.markerShape.getElement())&&a.data("unfilteredConfig",l)),r.markerLabel&&(l=Object.assign({animationLabel:"markerItem"},r.markerLabel),o.markerLabel=y.addItem(v.getId(),l,!0,d),(n=o.markerLabel&&o.markerLabel.getElement())&&n.data("unfilteredConfig",l))),d._buildKdTree()}}},{key:"updateMarkerItem",value:function(e,t){var o,a,n,r,i=this,l=i.getFromEnv("chart"),c=l.getChildren("mapAnnotations")[0],s=i.components.markerObjs,h=l.config.markerOpts,d={},u=s[e];if(u){for(a in o=u.config.options,Object(g.T)(o,t),i.imageLoadCount=0,n=u.config,t)d[a.toLowerCase()]=t[a]&&t[a].toString();n.fillColor=Object(g.yb)(d.fillcolor,d.color,h.fillColor),n.fillAlpha=Object(g.yb)(d.fillalpha,d.alpha,h.fillAlpha),n.fillRatio=Object(g.yb)(d.fillratio,h.fillRatio),n.fillAngle=Object(g.yb)(d.fillangle,h.fillAngle),n.borderThickness=Object(g.Ab)(d.borderthickness,h.borderThickness),n.borderColor=Object(g.yb)(d.bordercolor,h.borderColor),n.borderAlpha=Object(g.yb)(d.borderalpha,h.borderAlpha),n.labelPadding=d.labelpadding||h.labelPadding,n.options.tooltext=Object(g.yb)(d.tooltext,h.tooltext),n.link=d.link,r=i._drawMarkerItem.call(u).markerShape,i._buildKdTree(),c.update(e,r)}}},{key:"_removeMarkerItem",value:function(e){var t,o,a=this.components,n=a.markerObjs,r=n[e],i=a.kdArrayMap;r&&(t=r.markerShape,o=r.markerLabel,t&&t.dispose(),o&&o.dispose(),delete i[e],this._buildKdTree()),delete n[e]}},{key:"getElement",value:function(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)}}],[{key:"getMarkerRadiusLimits",value:function(e,t,o,a){var n=ce(e,t);return a=parseFloat(a),o=parseFloat(o),isNaN(a)||isNaN(o)?isNaN(a)?isNaN(o)?{min:.02*n,max:.07*n}:{min:parseInt(o/10,10),max:o}:{min:a,max:10*a}:a<o?{min:a,max:o}:{min:o,max:a}}},{key:"_initializeMarkerItem",value:function(e,t,o){var a,n={},r=n.config;return r||(r=n.config={}),r.id=e,r.definition=t,r.application=o,r.hasValue=null,r.value=null,r.options=null,r.label=null,r.markerShape=null,r.markerLabel=null,r.drawOptions={shape:null,label:null},r.drawComplete=!1,a=n.config.options=Object(g.T)({},r.definition),r.dataEnabled?!isNaN(a.value)&&""!==a.value&&(n.value=parseFloat(a.value),n.hasValue=!0):r.applyAll?r.options=Object(g.T)(a,r.application):o&&(r.options=Object(g.T)(a,r.application)),n}}]),t}(N);Object(j.a)({name:"mapsAnimation",type:"animationRule",extension:A});var pe=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getType",value:function(){return"group"}},{key:"getName",value:function(){return"mapGroup"}},{key:"configure",value:function(){this._mapChildren(function(e){e.configure&&e.configure()})}},{key:"createContainer",value:function(){var e,t=this,o=t.getLinkedParent(),a=t.getFromEnv("animationManager");e=o.getChildContainer().plotGroup,t.getChildContainer("plotShadow")||t.addChildContainer("plotShadow",a.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:t,label:"group"})),t.getChildContainer("plot")||t.addChildContainer("plot",a.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:t,label:"group"}))}},{key:"_transformGroup",value:function(){var e=this,t=this.getFromEnv("chart"),o=t.getFromEnv("chartInstance"),a=e.getFromEnv("animationManager"),n=t.jsonData,r=e.getChildContainer("plot"),i=e.getChildContainer("plotShadow"),l=t.config.scalingParams;r.hide(),i.hide(),t.config.entitiesReady=!1,o.addEventListener("internal.mapdrawingcomplete",function(t){t.detachHandler(),g.ib&&(o.args.link&&o.args.clickedEntityBox&&n.chart.linkedcharttransition,r&&a.setAnimation({el:r,attr:{transform:l.transformStr},component:e,label:"group"}),i&&a.setAnimation({el:i,attr:{transform:l.transformStr},component:e,label:"group"})),r.show(),i.show()}),t.checkComplete()}},{key:"draw",value:function(){this.createContainer(),this._transformGroup()}},{key:"getDataLimits",value:function(e){var t,o=this,a=1/0,n=-1/0,r=0,i=function(e){n=Math.max(n,e.max),a=Math.min(a,e.min)};return o._mapChildren(function(o){return o.getState("removed")||!1===o.getState("visible")?void(e&&(t=o.getDataLimits(e),i(t))):(r++,t=o.getDataLimits(e),void i(t))}),r?o.setState("visible",!0):o.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:n,min:a}}}]),t}(p.a),me=function(e){var t,o=e.getFromEnv("dataSource"),a=o.data||{},n=o.markers;Object(g.M)(e,pe,"mapGroup"),t=e.getChildren("mapGroup")[0],Object(g.Q)(t,N,"entities",1,[a]),n?Object(g.Q)(t,be,"markers",1,[n]):e.getDatasets()[1]&&e.getDatasets()[1].remove()},ve=o(413),ye=o(35),ke=function(e){function t(){var e;Object(i.a)(this,t),e=Object(l.a)(this,Object(c.a)(t).call(this));var o=Object(ye.a)(Object(ye.a)(e));return o.mapByCategory=!1,o.colorArr=[],o.noValidRange=!0,o.sortLegend=!1,e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"__setDefaultConfig",value:function(){Object(r.a)(Object(c.a)(t.prototype),"__setDefaultConfig",this).call(this),this.config.defaultObj={code:"CCCCCC",alpha:"100"}}},{key:"getType",value:function(){return"colorComponent"}},{key:"getName",value:function(){return"colorBucket"}},{key:"configure",value:function(e){if(e){var t,o,a,n,r,i,l,c,s,h,d,u=this,f=u.mapByCategory,b=e.numberFormatter,p=e.colorRange||{},m=Object(g.T)([],p.color),v=this.getLinkedParent(),y=u.getFromEnv("dataSource"),k=Math.min(Math.max(Object(g.Ab)(y.chart.palette,0)-1,0),4),O=v.defaultPaletteOptions&&v.defaultPaletteOptions.paletteColors[k],C=Object(g.Ab)(b.getCleanValue(p.maxvalue),1/0),j=Object(g.Ab)(b.getCleanValue(p.minvalue),-1/0),x=u.colorArr;if(void 0!==e.mapByCategory&&(f=u.mapByCategory=!!+e.mapByCategory),(m=f?m.filter(function(e){return e.code||e.color}):m.filter(function(e){return e.minvalue||e.maxvalue})).forEach(function(e){e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(c=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=c),e.minvalue?e.maxvalue?(h=b.getCleanValue(e.minvalue),s=b.getCleanValue(e.maxvalue),e.rangeLabel=b.dataLabels(h)+"-"+b.dataLabels(s)):(h=b.getCleanValue(e.minvalue),e.maxvalue=s=C,e.rangeLabel=s===1/0?">"+b.dataLabels(h):b.dataLabels(h)+"-"+b.dataLabels(s)):(e.minvalue=h=j,s=b.getCleanValue(e.maxvalue),e.rangeLabel=h===-1/0?"<"+b.dataLabels(s):b.dataLabels(h)+"-"+b.dataLabels(s))}),m.sort(function(e,t){return+e.minvalue==+t.minvalue?e.maxvalue-t.maxvalue:e.minvalue-t.minvalue}),m&&(t=m.length)){for(x.length=0,o=0;o<t;o+=1)l=m[o],a=Object(g.yb)(l.color,l.code,O&&O[o]),n=Object(g.yb)(l.alpha),i=Object(g.yb)(l.bordercolor),r=Object(g.yb)(l.borderalpha,100),s=Object(g.Ab)(l.maxvalue),h=Object(g.Ab)(l.minvalue),d=Object(g.yb)(l.label,l.displayvalue,l.rangeLabel),(a&&s>=h||f&&d)&&x.push({code:a,alpha:n||"100",oriAlpha:n,maxvalue:s,minvalue:h,label:Object(g.wb)(d),labelId:d.toLowerCase(),bordercolor:i,borderAlpha:r,name:l.name});u.sortedColorArr=u.colorArr.slice(0)}else u.noValidRange=!0,u.colorArr=[],u.sortedColorArr=[]}}},{key:"getColorObj",value:function(e){if(void 0===e)return{outOfRange:!0};var t,o,a=this,n=a.sortedColorArr,r=a.gradient?1:0,i=n[r];if(a.mapByCategory){for(e=Object(g.wb)(e).toLowerCase()||e.toString().toLowerCase();i;){if(i.labelId===e||i.maxvalue>=e&&i.minvalue<=e)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,legendItemId:i.legendItemId};i=n[r+=1]}return{outOfRange:!0}}if(a.gradient){if(a.scaleMin<=e&&a.scaleMax>=e){for(;i&&i.maxvalue<e;)i=n[r+=1];return o=(e-i.minvalue)/i.range,{code:function(e,t,o){var a=e[0],n=e[1],r=e[2],i=a+(t[0]-a)*o,l=n+(t[1]-n)*o,c=r+(t[2]-r)*o;return{hex:("#000000"+(i<<16|l<<8|c).toString(16)).slice(-6),rgb:[i,l,c]}}(n[r-1].codeRGB,i.codeRGB,o).hex}}return{outOfRange:!0}}for(;i;){if(e<i.minvalue&&!t)return 0==r?{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha}:{code:n[r-1].code,alpha:n[r-1].alpha||"100",oriAlpha:n[r-1].oriAlpha,seriesIndex:r,name:n[r-1].name,label:n[r-1].label,outOfRange:!0,bordercolor:n[r-1].bordercolor,borderalpha:n[r-1].borderAlpha};if(e>i.maxvalue&&r==n.length-1)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};if(i.maxvalue>e&&i.minvalue<=e)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};if(e===i.maxvalue&&(t={code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:r,name:i.name,label:i.label,bordercolor:i.bordercolor,borderalpha:i.borderAlpha}),r==n.length-1&&t)return t;i=n[r+=1]}return n.length?void 0:{outOfRange:!0}}},{key:"getColorRangeArr",value:function(e,t){var o,a,n,r,i,l,c,s,h=this.colorArr,d=[];if(!this.defaultAsigned&&(e>t&&(o=e,e=t,t=o),e<t&&(r=this.getColorObj(e),l=this.getColorObj(t),r&&l))){for(i=e,a=r.seriesIndex,n=l.seriesIndex;a<=n;a+=1)(c=Object(g.T)({},h[a])).minvalue!==i&&(c.minvalue=i),d.push(c),s=c,i=c.maxvalue;s&&(s.maxvalue=t)}return d}}]),t}(p.a),Oe=function(e,t,o){var a,n,r=Math.round,i=e.value,l=e.code,c=Object(k.a)(l),s=t.value,h=t.code,d=Object(k.a)(h);return a=s-i,n=[r(c[0]+(d[0]-c[0])/a*(o-i)),r(c[1]+(d[1]-c[1])/a*(o-i)),r(c[2]+(d[2]-c[2])/a*(o-i))],Object(k.b)(n)},Ce=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).colorRange={},e.valueRatio={},e.data={},e.mapByPercent=void 0,e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getType",value:function(){return"colorComponent"}},{key:"getName",value:function(){return"gradientColorRange"}},{key:"configure",value:function(e){if(e){var t,o,a,n=this;for(n.data=e,n.appender="",a=n.colorRange=e.colorRange.sort(function(e,t){return e.value-t.value}),n.valueRatio=void 0,n.values=[],t=0,o=a.length;t<o;t++)n.values.push(a[t].value)}}},{key:"getValueRatio",value:function(){var e,t,o=this.colorRange,a=o.length,n=this.valueRatio,r=o[a-1].value,i=o[0].value,l=0;if(n)return n;for(n=this.valueRatio=[],e=0;e<a;e++)t=(o[e].value-i)/(r-i),n.push(100*(t-l)),l=t;return n}},{key:"getCumulativeValueRatio",value:function(){var e,t,o=this.colorRange,a=o.length,n=o[0].value,r=o[a-1].value,i=[];for(t=0;t<a;t++)e=o[t],i.push((e.value-n)/(r-n)*100);return i}},{key:"getBoxFill",value:function(e){var t,o,a,n,r=this.colorRange,i=r.length,l=[];for(n=e?90:0,o=0;o<i;o++)t=r[o],l.push(t.code);return a={FCcolor:{alpha:"100,100,100",angle:n,color:l.join(","),ratio:this.getValueRatio().join(",")}},Object(g.Lb)(a)}},{key:"getColorByValue",value:function(e){var t,o,a,n,r=this.values,i=this.colorRange;if(void 0!==e&&null!==e){for(o=0,t=r.length;o<t;o++){if(e===r[o]){n=i[o].code;break}if(!o&&e<r[o]){a=!0;break}if(o===t-1&&e>r[o]){a=!0;break}if(e>r[o]&&e<r[o+1]){n=Oe(i[o],i[o+1],e);break}}return a?void 0:n}}}]),t}(p.a);function je(e){return Object(k.j)(e||Ae)||Ae}var xe="rgba(192,192,192,"+(g.ob?.002:1e-6)+")",Ae="#000000",we=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(g.Lb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:xe,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:xe,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var a,n,r,i,l,c,s,h,d,u,f,b,p=Math.max,m=Math.min,v={},y=e.getFromEnv("number-formatter"),O=e.getFromEnv("dataSource"),C=O.dataset,j=O.data;if(o=o||{},!t)return!1;for("maps"!==e.defaultDatasetType||void 0!==o.min&&void 0!==o.max?"HeatMap"===e.getName()&&(void 0===o.min||void 0===o.max)&&(o={min:1/0,max:-1/0},C.forEach(function(e){e.data&&e.data.forEach(function(e){o.min=m(o.min,Object(g.Ab)(e.value,o.min)),o.max=p(o.max,Object(g.Ab)(e.value,o.max))})})):(o={min:1/0,max:-1/0},j&&j.forEach(function(e){o.min=m(o.min,Object(g.Ab)(e.value,o.min)),o.max=p(o.max,Object(g.Ab)(e.value,o.min))})),v.mapByPercent=f=!!Object(g.Ab)(t.mapbypercent,0),a=t.color||[],void 0===t.minvalue&&(t.minvalue=void 0===o.min?0:f?0:o.min),void 0===t.maxvalue&&(t.maxvalue=void 0===o.max?100:f?100:o.max),(t.maxvalue===t.minvalue||o.min===1/0||o.max===-1/0)&&(t.minvalue=0,t.maxvalue=100),b=!1,l=0,s=a.length;l<s;l++)if(a[l].maxvalue){b=!0;break}for(b||(a=[]),r=t.code,h=v.colorRange=[],v.gradient=!!Object(g.Ab)(t.gradient,1),a.length?r=je(r):(r?(i=je(r),r=je()):i=function(e){return Object(k.h)(e,1)}(r=je()),a.push({code:i,maxvalue:t.maxvalue,label:void 0})),function(t){var o,a,n,r=e.getFromEnv("number-formatter");for(o=0,a=t.length;o<a;o++)(n=t[o].maxvalue)&&(t[o].maxvalue=r.getCleanValue(n))}(a),a=a.sort(function(e,t){return e.maxvalue-t.maxvalue}),d=u=t.minvalue&&y.getCleanValue(t.minvalue),u=(void 0!==d||null!==d)&&(f?d+"%":y.legendValue(d)),h.push({code:Object(g.R)(r),value:d,displayValue:u,label:t.startlabel}),l=0,s=a.length;l<s;l++)c=je((n=a[l]).code||n.color),d=u=n.maxvalue,!isNaN(parseInt(d,10))&&(u=(void 0!==d||null!==d)&&(f?d+"%":y.legendValue(d)),h.push({code:Object(g.R)(c),value:d,displayValue:u,label:n.label||n.displayvalue}));return h[h.length-1].label=t.endlabel||n.label,v},getDefaultConf:function(e){return t[e]}}}(),Fe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).datasource={},e.config.legendItemIds=[],e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"configure",value:function(){var e,t,o,a=this,n=this.getFromEnv("chart"),r="maps"===n.defaultDatasetType,i="TreeMap"===n.getName(),l=this.getFromEnv("dataSource").chart.mapbycategory,c=n.getFromEnv("number-formatter"),s=n.config.showLegend,h=n.getChildren("colorRange")&&n.getChildren("colorRange")[0];n.addToEnv("colorManager",a),a.datasource=n.getFromEnv("dataSource"),e=a.datasource.colorrange,h&&h.remove({instant:!0}),s||(a.config.legendItemIds=[]),"gradient"===(t=r?e.gradient&&+e.gradient?"gradient":e.color?"icon":"none":i?"gradient":e.gradient&&"0"!=e.gradient&&!+l?"gradient":"icon")?(we.init({chart:n}),o=we.legacyDataParser(e),Object(g.M)(n,Ce,"colorRange",1,[o]),h=n.getChildren("colorRange")[0],n.addToEnv("colorRange",h),o||(h._dontPlot=!0),a.config.legendItemIds=[],a._configureGradientLegend(h)):"icon"===t?(Object(g.M)(n,ke,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:Object(g.Ab)(l,0),defaultColor:"cccccc",numberFormatter:c}]),n.addToEnv("colorRange",n.getChildren("colorRange")[0]),s&&a._addLegendItems()):"none"===t&&(n.deleteFromEnv("colorManager"),a.config.legendItemIds=[])}},{key:"_configureGradientLegend",value:function(e){var t=this,o=t.getFromEnv("chart").getFromEnv("gLegend");o&&(o.setColorRange(e),t.addExtEventListener("rangeUpdated",function(e,o){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:o,component:"gradientlegend"})},o))}},{key:"_addLegendItems",value:function(){var e,t,o,a,n,r=this,i=r.config,l=r.getFromEnv("chart"),c=l.getChildren("legend")[0],s=l.getFromEnv("colorRange").colorArr,h=s.length;for(a=0;a<h;a++)n={label:Object(g.yb)(s[a].label,s[a].displayvalue),datasetObj:s[a],index:a},t=Object(k.h)(s[a].code,40),e={FCcolor:{color:s[a].code+","+s[a].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(o=c.getItem(i.legendItemIds[a]))||(i.legendItemIds.push(c.createItem(r)),(o=c.getItem(i.legendItemIds[a])).addEventListener("fc-click",o.itemClickFn)),o.removeLegendState("hidden"),s[a].legendItemId=o&&o.getId(),o.configure(n),o.setStateCosmetics("default",{symbol:{fill:Object(g.Lb)(e),rawFillColor:s[a].code}});for(a=h;a<i.legendItemIds.length;a++)c.disposeItem(i.legendItemIds[a]);i.legendItemIds.splice(h)}},{key:"legendInteractivity",value:function(e){var t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})}},{key:"getColor",value:function(e){var t=this,o=t.datasource.colorrange;return!+t.datasource.chart.mapbycategory&&+o.gradient?{code:t.getColorByValue(e)}:t.getColorObj(e)}},{key:"getValueRatio",value:function(){return this.getFromEnv("colorRange").getValueRatio()}},{key:"getCumulativeValueRatio",value:function(){return this.getFromEnv("colorRange").getCumulativeValueRatio()}},{key:"getBoxFill",value:function(e){return this.getFromEnv("colorRange").getBoxFill(e)}},{key:"getColorByValue",value:function(e){return this.getFromEnv("colorRange").getColorByValue(e)}},{key:"getColorObj",value:function(e){return this.getFromEnv("colorRange").getColorObj(e)}}]),t}(p.a);var Le,Ee,Se,_e=function(e){!function(e){var t=e.getChildren("colorManager");e.getFromEnv("dataSource").colorrange?t?(e.addToEnv("colorManager",t[0]),t[0].configure()):(t=new Fe,e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),t.configure()):(t&&(t[0].config.legendItemIds=[]),e.deleteFromEnv("colorManager"))}(e)},Te={},Ie="rgba(192,192,192,"+(g.ob?.002:1e-6)+")",Pe=!1,Re=!0,Me="#000000",Be={}.hasOwnProperty;function De(e,t){return function e(t,o){var a,n;for(n in t)Be.call(t,n)&&(a=t[n],o[n]===Le?o[n]=a:"object"==typeof a&&null!==a&&e(a,o[n]))}(e,t),t}function Ve(e){return Object(k.j)(e||Me)||Me}function Ne(e){var t,o=e.fontSize+"";return o?(t=o.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function Ge(e){return!(e!==Le&&"undefined"!=typeof e&&null!==e&&!isNaN(e))}Te.CAPTION="CAPTION",Te.LEGEND_BODY="LEGEND_BODY",Te.AXIS_LABEL="LEGEND_LABEL",Te.LEGEND_AXIS="LEGEND_AXIS",Te.RANGE="RANGE",Te.AXIS_VALUE="AXIS_VALUE",Ee=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(g.Lb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:Ie,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:Ie,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var a,n,r,i,l,c,s,h,d,u,f,b,p={},m=e.getFromEnv("number-formatter");if(!t)return!1;for(p.mapByPercent=f=!!Object(g.Ab)(t.mapbypercent,0),a=t.color||[],t.minvalue===Le&&(t.minvalue=o.min===Le?0:f?0:o.min),t.maxvalue===Le&&(t.maxvalue=o.max===Le?100:f?100:o.max),b=!1,l=0,s=a.length;l<s;l++)if(a[l].maxvalue){b=!0;break}for(b||(a=[]),r=t.code,h=p.colorRange=[],p.gradient=!!Object(g.Ab)(t.gradient,1),a.length?r=Ve(r):(r?(i=Ve(r),r=Ve()):i=function(e){return Object(k.h)(e,1)}(r=Ve()),a.push({code:i,maxvalue:t.maxvalue,label:Le})),function(t){var o,a,n,r=e.getFromEnv("number-formatter");for(o=0,a=t.length;o<a;o++)(n=t[o].maxvalue)&&(t[o].maxvalue=r.getCleanValue(n))}(a),a=a.sort(function(e,t){return e.maxvalue-t.maxvalue}),d=u=t.minvalue&&m.getCleanValue(t.minvalue),u=(d!==Le||null!==d)&&(f?d+"%":m.legendValue(d)),h.push({code:Object(g.R)(r),value:d,displayValue:u,label:t.startlabel}),l=0,s=a.length;l<s;l++)c=Ve((n=a[l]).code||n.color),d=u=n.maxvalue,!isNaN(parseInt(d,10))&&(u=(d!==Le||null!==d)&&(f?d+"%":m.legendValue(d)),h.push({code:Object(g.R)(c),value:d,displayValue:u,label:n.label||n.displayvalue}));return h[h.length-1].label=t.endlabel||n.label,p},getDefaultConf:function(e){return t[e]}}}();var He=function(e){function t(){var e;return Object(i.a)(this,t),e=Object(l.a)(this,Object(c.a)(t).call(this)),Se=Object(ye.a)(Object(ye.a)(e)),e.enabled=!1,e.drawOptions={},e.components={},e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"getType",value:function(){return"gradientLegend"}},{key:"getName",value:function(){return"gLegend"}}]),Object(n.a)(t,[{key:"setColorRange",value:function(e){var t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)}},{key:"configureAttributes",value:function(){var e,t,o,a,n,r,i,l,c,s,h=this,d=h.getFromEnv("chart"),u=h.getFromEnv("dataSource").chart,f=h.conf={},b=u.outcnvbasefont,p=u.outcnvbasefontsize,m=u.outcnvbasefontcolor,v=d.config.dataLabelStyle;Ee.init({chart:d}),h.data=h.getFromEnv("dataSource").colorrange,h._dontPlot||(h.drawOptions={smartLabel:h.getFromEnv("smartLabel"),gLegend:h},h._dontPlot=!1,h._recalculateLogicalSpace=!0,f.caption=Object(g.yb)(u.legendcaption),f.legendPosition=Object(g.yb)(u.legendposition,"bottom").toLowerCase(),f.showLegend=Object(g.Ab)(u.showlegend,1),f.interactiveLegend=Object(g.Ab)(u.interactivelegend,1),f.showLegendLabels=Object(g.Ab)(u.showlegendlabels,1),e=u.legenditemfontcolor||m,t=u.legenditemfont||b,o=u.legenditemfontsize||p,a=Object(g.Ab)(u.legenditemfontbold,0),n=u.legendcaptionfontcolor||m,r=u.legendcaptionfont||b,i=u.legendcaptionfontsize||p,l=Object(g.Ab)(u.legendcaptionfontbold,1),s=(c=u.legendaxisbordercolor?Object(g.kb)(Object(g.R)(u.legendaxisbordercolor)):Le)?Object(g.Ab)(u.legendaxisborderalpha,100)/100:Le,f.axisTextItemConf={style:{fill:e?Object(k.c)(Object(g.yb)(e)):v.color,fontFamily:t?Object(g.yb)(t):v.fontFamily,fontSize:o?Object(g.Ab)(o):v.fontSize.match(/\d+/)[0],fontWeight:a?"bold":v.fontWeight}},f.legendCaptionConf={style:{fill:n?Object(k.c)(Object(g.yb)(n)):v.color,fontFamily:r?Object(g.yb)(r):v.fontFamily,fontSize:i?Object(g.Ab)(i):v.fontSize.match(/\d+/)[0],fontWeight:l?"bold":v.fontWeight,fontStyle:"normal"}},f.legendAxisConf={legendAxisHeight:11,style:{stroke:c,"stroke-opacity":s},line:{style:{stroke:Object(k.c)(Object(g.yb)(u.legendscalelinecolor,"FFF8E9"),Object(g.Ab)(u.legendscalelinealpha,100)),"stroke-width":Object(g.Ab)(u.legendscalelinethickness)}}},f.sliderGroupConf={showTooltip:Object(g.Ab)(u.showtooltip,1),outerCircle:{rFactor:Object(g.Ab)(u.sliderdiameterfactor),style:{stroke:Object(k.c)(Object(g.yb)(u.legendpointerbordercolor,"757575"),Object(g.Ab)(u.legendpointerborderalpha,100))}},innerCircle:{rFactor:Object(g.Ab)(u.sliderholediameterfactor),style:{stroke:Object(k.c)(Object(g.yb)(u.legendpointercolor,"FFFFFF"),Object(g.Ab)(u.legendpointeralpha,100))}}},f.legendCarpetConf={spreadFactor:Object(g.Ab)(u.legendspreadfactor),allowDrag:!!Object(g.Ab)(u.legendallowdrag,0),captionAlignment:Object(g.yb)(u.legendcaptionalignment,"center"),style:{fill:Object(k.c)(Object(g.yb)(u.legendbgcolor,"e4d9c1"),Object(g.Ab)(u.legendbgalpha,100)),stroke:Object(k.c)(Object(g.yb)(u.legendbordercolor,"c4b89d"),Object(g.Ab)(u.legendborderalpha,100)),"stroke-width":Object(g.Ab)(u.legendborderthickness,1)}})}},{key:"postConfigureInit",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d=this,g=d.conf;d.elem={},g.interactiveLegend?(a=De(Ee.getDefaultConf("sliderGroupConf"),g.sliderGroupConf),this.sGroup?((o=d.elem.sGroup=this.sGroup).configure(a),d.elem.sGroup.gLegend=d):(this.sGroup=d.elem.sGroup=o=new Ze(a),o.configure(a),d.elem.sGroup.gLegend=d)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(a=De(Ee.getDefaultConf("legendCarpetConf"),g.legendCarpetConf)).legendPosition=g.legendPosition,h=Ee.getDefaultConf("legendBodyConf"),"bottom"===g.legendPosition?(d.drawOptions.refSideKey="canvasWidth",d.drawOptions.refOffsetKey="canvasLeft",n=De(Ee.getDefaultConf("axisTextItemConf"),g.axisTextItemConf),h.legendPosition="bottom",(s=De(Ee.getDefaultConf("legendAxisConf"),g.legendAxisConf)).legendPosition="bottom",n.legendPosition="bottom"):(d.drawOptions.refSideKey="canvasHeight",d.drawOptions.refOffsetKey="canvasTop",n=De(Ee.getDefaultConf("axisTextItemConf"),g.axisTextItemConf),h.legendPosition="right",(s=De(Ee.getDefaultConf("legendAxisConf"),g.legendAxisConf)).legendPosition="right",n.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new ze,this.components.LegendBody=new Ke,this.components.LegendAxis=new Je,this.components.LegendValues=new qe,g.showLegendLabels&&(this.components.LegendLabels=new Ye)),t=this.components.LegendAxis,l=this.components.LegendValues,e=this.components.LegendCarpet,r=this.components.LegendBody,g.showLegendLabels&&(i=this.components.LegendLabels),this.components.LegendCarpet.configure(a),this.components.LegendValues.configure(n),this.components.LegendAxis.configure(s),this.components.LegendBody.configure(d.drawOptions.colorRange,h,n),g.showLegendLabels&&i.configure(n),g.caption?(c=De(Ee.getDefaultConf("legendCaptionConf"),g.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(g.caption,c):(this.componentCaption=new Xe).configure(g.caption,c),e.addCompositions(this.componentCaption,Te.CAPTION)):(e.removeCompositions(Te.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),o&&t.addCompositions(o,Te.RANGE),i&&r.addCompositions(i,Te.AXIS_LABEL),r.addCompositions(t,Te.LEGEND_AXIS),r.addCompositions(l,Te.AXIS_VALUE),e.addCompositions(r,Te.LEGEND_BODY),d.elem.gl=new We(e)}},{key:"getValueRange",value:function(){var e,t,o=this.elem&&this.elem.sGroup,a=o.sliders,n=o.extremes;return e=a.false.currPos,t=n[1]-n[0]+a.true.currPos,[{min:o.getValueFormPixel(e),max:o.getValueFormPixel(t)}]}},{key:"_dispose",value:function(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},Object(r.a)(Object(c.a)(t.prototype),"_dispose",this).call(this)}},{key:"getCalculatedLogicalSpace",value:function(){return this._logicalArea}},{key:"setCalculatedLogicalSpace",value:function(e){this._logicalArea=e}},{key:"getLogicalSpace",value:function(e){var t,o,a,n=this,r=n.conf,i={height:0,width:0},l=n.drawOptions,c=n.getFromEnv("chartConfig");return n._recalculateLogicalSpace?n._dontPlot?i:(n._recalculateLogicalSpace=!1,n.postConfigureInit(),r.showLegend?(o=l.refSideKey,a=l.refOffsetKey,n.drawOptions.refSide=c[o],n.drawOptions.refOffset=c[a],n.drawOptions.maxOtherSide=e||n.drawOptions.maxOtherSide,n.elem.gl&&(t=n.elem.gl.getLogicalSpace(n.drawOptions,!0),n.elem.gl&&n.setCalculatedLogicalSpace(t)),n.getCalculatedLogicalSpace()):i):(o=l.refSideKey,a=l.refOffsetKey,n.drawOptions.refSide=c[o],n.drawOptions.refOffset=c[a],n.drawOptions.maxOtherSide=e||n.drawOptions.maxOtherSide,t=n.elem.gl.getLogicalSpace(n.drawOptions,!0),n.setCalculatedLogicalSpace(t),n.getCalculatedLogicalSpace()||i)}},{key:"resetLegend",value:function(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()}},{key:"allocatePosition",value:function(){var e,t,o,a,n,r,i=this.getFromEnv("chart"),l=i.config,c=this.conf||{},s=c.legendPosition,h=l.canvasLeft,d=l.canvasTop,g=l.canvasWidth,u=l.canvasHeight,f=l.marginBottom,b=l.marginRight;i.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),o=c.width=e.width,a=c.height=e.height,"bottom"===s?(n=h+(0>(t=g-o)?0:t/2),r=l.height-e.height-f-(l.actionBarHeight||0)):(r=d+(0>(t=u-a)?0:t/2),n=l.width-e.width-b),c.xPos=n,c.yPos=r)}},{key:"draw",value:function(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,o=this.conf||{},a=e.hasGradientLegend;!e.config.gLegendEnabled||t&&a&&this.drawLegendComponent(o.xPos,o.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})}},{key:"drawLegendComponent",value:function(e,t,o){var a,n=this,r=n.conf;return n._dontPlot?void 0:r.showLegend?(n.drawOptions.animationManager=o.animationManager,n.drawOptions.parentGroup=o.parentGroup,n.drawOptions.x=e,n.drawOptions.y=t,n.drawOptions.maxOtherSide=n.drawOptions.maxOtherSide||o.maxOtherSide,a=n.elem.gl.draw(n.drawOptions).getBBox(),r.xPos=a.x,r.yPos=a.y,r.height=a.height,r.width=a.width,void(n.enabled=!0)):void(n.enabled=!1)}}]),t}(p.a),We=function(){function e(t){Object(i.a)(this,e),this.carpet=t}return Object(n.a)(e,[{key:"draw",value:function(e){return this.carpet.draw(e)}},{key:"getLogicalSpace",value:function(e,t){return this.carpet.getLogicalSpace(e,t)}},{key:"dispose",value:function(){this.carpet&&this.carpet.group&&this.carpet.group.remove()}}]),e}(),ze=function(){function e(t){Object(i.a)(this,e),this.conf=t,this._id="GL_CARPET",this.compositionsByCategory={},this.node=Le,this.group=Le,this._lSpace=Le,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}return Object(n.a)(e,[{key:"configure",value:function(e){this.conf=e}},{key:"getName",value:function(){return"LegendCarpet"}},{key:"getType",value:function(){return"legend"}},{key:"addCompositions",value:function(e,t){this.compositionsByCategory[t]=e}},{key:"removeCompositions",value:function(e){delete this.compositionsByCategory[e]}},{key:"getBoundingBox",value:function(e){var t,o,a=this.conf,n=a.spreadFactor,r=e.refSide,i=e.alignment,l=e.refOffset,c=e.x,s=e.y;return"bottom"===this.conf.legendPosition?(t=a.width=r*n,o=e.maxOtherSide,i&&(c===Le||null===c)&&(c=(l+r)/2-t/2)):(o=a.height=r*n,t=e.maxOtherSide,i&&(s===Le||null===s)&&(s=(l+r)/2-o/2)),{width:t,height:o,x:c,y:s}}},{key:"getPostCalcDecisionsH",value:function(e,t){var o,a=this.conf.padding,n=0;for(o in this.moveInstructions={},t)n+=t[o].height||0;e.height=n+2*a.v}},{key:"getLogicalSpace",value:function(e,t){var o,a,n,r,i,l=this._lSpace,c=["CAPTION","LEGEND_BODY"],s=this.conf.padding,h=this.compositionsByCategory,d=0,g={},u=0;if(l&&!t)return l.isImpure=!0,l;(Ge((l=this._lSpace=a=this.getBoundingBox(e)).x)||Ge(l.y)||Ge(l.height)||Ge(l.width))&&(this.autoRecalculate=!0),(n=De(a,{})).height-=2*s.v,n.width-=2*s.h,n.x+=s.h,n.y+=s.v;for(var f=0;f<c.length;f++)(o=h[c[f]])&&((i=De(n,{})).y+=d,d=n.height*o.conf.spreadFactor,i.height=d+u,r=o.getLogicalSpace(De(i,{}),e,t),u=i.height-r.height,g[c[f]]=r,d=r.height);return this.getPostCalcDecisions(a,g),this._lSpace=a,a}},{key:"setupDragging",value:function(){var e=this.group,t=0,o=0,a=0,n=0;e.css({cursor:"move"}),e.drag(function(r,i){t=r,o=i,e.attr({transform:"t"+(a+t)+","+(n+o)})},function(){a+=t,n+=o},g.Jb)}},{key:"draw",value:function(e){var t,o,a,n=this.conf,r=["CAPTION","LEGEND_BODY"],i=this.compositionsByCategory,l=e.animationManager,c=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),a=this._lSpace,this.group=t=l.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:Se,container:c,label:"carpetGroup"}),this.node=l.setAnimation({el:this.node||"rect",attr:a,css:n.style,component:Se,container:t,label:"rect"});for(var s=0;s<r.length;s++)(o=i[r[s]])&&o.draw(n.captionAlignment,a,{animationManager:l,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return n.allowDrag&&this.setupDragging(),this.node}},{key:"getPostCalcDecisions",value:function(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)}},{key:"getPostCalcDecisionsV",value:function(e,t){var o,a,n,r=this.conf.padding,i=Number.NEGATIVE_INFINITY,l=this.moveInstructions;for(a in this.getPostCalcDecisionsH(e,t),t)i=i<(o=t[a].width)?o:i;for(a in e.width=i+2*r.h,t)(n=i-(o=t[a].width))&&(l[a]="t"+n/2+",0")}}]),e}(),Xe=function(){function e(t,o){Object(i.a)(this,e),this.rawText=t,this.conf=o,this._id="GL_CAPTION",this.node=Le,this.bound=Le,this._lSpace=Le,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){var e=arguments[1];return e.x+e.width/2}}}return Object(n.a)(e,[{key:"configure",value:function(e,t){this.rawText=e,this.conf=t}},{key:"getName",value:function(){return"LegendCaption"}},{key:"getType",value:function(){return"caption"}},{key:"getLogicalSpace",value:function(e,t,o){var a,n,r,i,l=this.conf.padding,c=this._lSpace,s=this.rawText,h=t.gLegend.getFromEnv("chartConfig");return c&&!o?(c.isImpure=!0,c):(c=this._lSpace={bound:{height:0,width:0},node:{logicArea:Le,smartText:Le}},a=t.smartLabel,s?((n=De(e,{})).height-=2*l.v,n.width-=2*l.h,n.x+=l.h,n.y+=l.v,a.useEllipsesOnOverflow(h.useEllipsesWhenOverflow),Ne(i=De(this.conf.style,{})),a.setStyle(this._metaStyle=i),r=a.getSmartText(s,n.width,n.height),n.height=r.height,n.width=r.width,e.height=r.height+2*l.v,e.width=r.width+2*l.h,c.node.smartText=r,c.node.logicArea=n,c.bound=e,e):c.bound)}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d=this.conf,g=d.bound||{};return 3<=arguments.length?(i=arguments[0],l=arguments[1],c=arguments[2]):2<=arguments.length&&(i=arguments[0],c=arguments[1]),e=c.parentLayer,h=c.animationManager,this.group=t=h.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:d.style,component:Se,container:e}),this.getLogicalSpace(l,c),s=(n=this._lSpace).node,a=n.bound,this.bound=o=h.setAnimation({el:this.bound||"rect",attr:a,css:g.style,container:t,component:Se}),r="string"==typeof i?this.LegendCaption[i.toUpperCase()].x(s.smartText,l||s.logicArea):i,this.node=h.setAnimation({el:this.node||"text",attr:{text:s.smartText.text,x:r,y:s.logicArea.y+s.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:d.style.fill},container:t,component:Se}),{group:t,bound:o,node:this.node}}},{key:"dispose",value:function(){this.group.remove(),this.bound.remove(),this.node.remove()}}]),e}(),Ke=function(){function e(t,o,a){Object(i.a)(this,e),this.colorRange=t,this.conf=o,this.childTextConf=a,this._id="GL_BODY",this.bound=Le,this.group=Le,this.compositionsByCategory={},this._lSpace=Le,this.SC_STACK=[Te.AXIS_LABEL,Te.LEGEND_AXIS,Te.AXIS_VALUE],this.DARW_STACK=[Te.AXIS_VALUE,Te.LEGEND_AXIS,Te.AXIS_LABEL]}return Object(n.a)(e,[{key:"configure",value:function(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this.compositionsByCategory={}}},{key:"getName",value:function(){return"LegendBody"}},{key:"getType",value:function(){return"legend"}},{key:"addCompositions",value:function(e,t){this.compositionsByCategory[t]=e}},{key:"getSpaceTaken",value:function(e){return"bottom"===this.conf.legendPosition?e.height:e.width}},{key:"getLogicalSpace",value:function(e,t,o){var a,n,r,i,l,c,s,h=this._lSpace,d=this.conf.padding,g=this.compositionsByCategory,u=0;if(h&&!o)return h.isImpure=!0,h;for(h=this._lSpace={bound:{height:0,width:0},node:{logicArea:Le}},(i=De(e,{})).height-=2*d.v,i.width-=2*d.h,i.x+=d.h,i.y+=d.v,l=this.getCompositionPlotAreaFor(i),t.colorRange=this.colorRange,c=0,s=this.SC_STACK.length;c<s;c++)(a=g[this.SC_STACK[c]])&&(n=l(r,a.conf.spreadFactor),r=a.getLogicalSpace(De(n,{}),t,o),u+=this.getSpaceTaken(r));return this.updateEffectivePlotArea(e,i,u),h.node.logicArea=i,h.bound=e,e}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h=this.childTextConf,d=this.conf.bound.style||{},g=this.compositionsByCategory;for(3<=arguments.length?(r=arguments[1],l=arguments[2]):2<=arguments.length&&(l=arguments[1]),t=l.parentLayer,e=l.animationManager,this.getLogicalSpace(r,l),i=this._lSpace,this.group=n=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:h.style,container:t,component:Se}),this.bound=o=e.setAnimation({el:this.bound||"rect",attr:i.bound,css:d,container:n,component:Se}),l.colorRange=this.colorRange,l.parentLayer=n,c=0,s=this.DARW_STACK.length;c<s;c++)(a=g[this.DARW_STACK[c]])&&a.draw(l);return l.moveInstructions&&n.attr({transform:l.moveInstructions}),{bound:o,group:n}}},{key:"getCompositionPlotAreaFor",value:function(e){var t,o="bottom"===this.conf.legendPosition;return t=De(e,{}),function(a,n){return a=a||{},o?(t.y+=a.height||0,t.height=e.height*n):(t.x+=a.width||0,t.width=e.width*n),t}}},{key:"updateEffectivePlotArea",value:function(e,t,o){var a=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=o,e.height=o+2*a.v):(t.width=o,e.width=o+2*a.h)}}]),e}(),Ye=function(){function e(t){Object(i.a)(this,e),this.conf=t,this.node=[],this._id="GL_LABELS"}return Object(n.a)(e,[{key:"configure",value:function(e){this.conf=e}},{key:"getType",value:function(){return"label"}},{key:"getName",value:function(){return"LegendLabel"}},{key:"getEffectivePlotArea",value:function(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e}},{key:"getLogicalSpace",value:function(e,t,o){var a,n,r,i,l,c,s,h,d,g,u,f,b,p,m,v,y,k,O,C,j,x,A,w=Math.max,F="bottom"===this.conf.legendPosition,L=this._lSpace,E=this.conf,S=E.padding,_=[],T=t.gLegend.getFromEnv("chartConfig"),I=[];if(L&&!o)return L.isImpure=!0,L;for(a=t.colorRange,n=t.smartLabel,g=a.getCumulativeValueRatio(),r=a.colorRange,b=(L=this._lSpace={bound:{height:0,width:0},node:{logicArea:Le,smartTexts:[]}}).node.smartTexts,h=De(e,{}),m=this.getEffectivePlotArea(h),A=F?m.width:m.height,n.useEllipsesOnOverflow(T.useEllipsesWhenOverflow),x=De(E.style,{}),Ne(this._metaStyle=x),n.setStyle(x),v=n.getSmartText("W"),i=0,l=r.length;i<l;i++)(d=r[i].label)?I.push({oriIndex:i,label:d}):b[i]=Le;if(0===(l=I.length))return{height:0,width:0};for(f=u=1<l?(g[I[l-1].oriIndex]-g[I[0].oriIndex])/2*A/100:w(g[I[0].oriIndex],100-g[I[0].oriIndex])/2*A/100,F?((C=n.getSmartText(I[0].label,f,m.height)).x=g[I[0].oriIndex]*m.width/100,c=C.x+C.width):((C=n.getSmartText(I[0].label,f,m.width)).y=g[I[0].oriIndex]*m.height/100,c=C.y+C.width),_.push(C.height),b[I[0].oriIndex]=C,F?((C=n.getSmartText(I[l-1].label,f,m.height)).x=g[I[l-1].oriIndex]*m.width/100,s=C.x-C.width):((C=n.getSmartText(I[l-1].label,f,m.width)).y=g[I[l-1].oriIndex]*m.height/100,s=C.y-C.width),_.push(C.height),b[I[l-1].oriIndex]=C,O=c,i=1;i<l-1;i++)d=I[i].label,j=I[i].oriIndex,C=Le,y=i+1===l-1?s:g[I[i+1].oriIndex]*A/100,k=g[I[i].oriIndex]*A/100,(u=Math.min(k-O,y-k))>2*v.width&&(F?(C=n.getSmartText(d,u,m.height)).x=g[j]*m.width/100:(C=n.getSmartText(d,u,m.width)).y=g[j]*m.height/100,O=u,_.push(C.height)),b[I[i].oriIndex]=C;return p=w.apply(Math,_),F?(m.height=p,e.height=p+2*S.v):(m.width=p,e.width=p+2*S.v),L.node.logicArea=m,L.bound=e,e}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g="bottom"===this.conf.legendPosition,u=this.conf,f=u.bound&&u.bound.style||{stroke:"none"},b={};2<=arguments.length&&arguments[1]?(a=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),d=i.animationManager,e=i.parentLayer,this.getLogicalSpace(a,i),c=(r=this._lSpace).node.logicArea,s=r.node.smartTexts,this.group=o=d.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:Se}),this.bound=t=d.setAnimation({el:this.bound||"rect",attr:r.bound,css:f,container:o,component:Se});for(var p=0;p<this.node.length;p++)this.node[p].remove();for(this.node=[],l=0,h=s.length;l<h;l++)(n=s[l])&&(g?(b.y=c.y+n.height/2,b.x=l===h-1?c.x+n.x-n.width/2:l?c.x+n.x:c.x+n.x+n.width/2):(b.x=c.x+n.height/2,b.y=l===h-1?c.y+n.y-n.width/2:l?c.y+n.y:c.y+n.y+n.width/2),this.node.push(d.setAnimation({el:"text",attr:{text:n.text,x:b.x,y:b.y,lineHeight:this._metaStyle.lineHeight,fill:u.style.fill,transform:g?"R0":"R270,"+b.x+","+b.y},container:o,component:Se})));return{group:o,bound:t,node:this.node}}}]),e}(),Je=function(){function e(t){Object(i.a)(this,e),this.conf=t,this._id="FL_AXIS",this.node=Le,this.group=Le,this.shadow=Le,this.markerLine=Le,this.compositionsByCategory={}}return Object(n.a)(e,[{key:"configure",value:function(e){this.conf=e}},{key:"getName",value:function(){return"LegendAxis"}},{key:"getType",value:function(){return"axis"}},{key:"addCompositions",value:function(e,t){this.compositionsByCategory[t]=e}},{key:"getLogicalSpace",value:function(){var e,t,o,a,n,r,i="bottom"===this.conf.legendPosition,l=arguments[0],c=arguments[2],s=this._lSpace,h=this.conf,d=h.padding,g=h.legendAxisHeight,u=this.compositionsByCategory,f=0;return s&&!c?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:Le}},(n=De(l,{})).height-=2*d.v,n.width-=2*d.h,n.x+=d.h,n.y+=d.v,e=g/2+h.line.offset,t=g/2,(a=u[Te.RANGE])&&(r=a.sliders.false.conf.outerCircle.rFactor*g,t+=f=Math.max(r/2-g/2,0)),i?(n.y+=f,n.height=o=t+e+f,l.height=o+2*d.v):(n.x+=f,n.width=o=t+e+f,l.width=o+2*d.v),s.node.logicArea=n,s.bound=l,l)}},{key:"getDrawableAxisArea",value:function(e){var t=this.conf,o="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:o?e.width:t.legendAxisHeight,height:o?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}}},{key:"preDrawingRangeParamV",value:function(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}}},{key:"preDrawingRangeParamH",value:function(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}}},{key:"preDrawingRangeParam",value:function(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)}},{key:"getScaleMarkerPathStrH",value:function(e,t){var o,a,n,r,i,l=De(e,{}),c=this.conf.line,s="",h="";for(l.x+=l.r,l.width-=2*l.r,i=l.y+l.height,o=0,a=t.length;o<a;o++)n=t[o],s+="M"+(r=l.x+n*l.width/100)+","+(i-c.grooveLength)+"L"+r+","+(i+c.offset);return s+(h+="M"+l.x+","+(i+c.offset)+"L"+(l.x+l.width)+","+(i+c.offset))}},{key:"getColorGradientH",value:function(e){return{axis:e.getBoxFill(),shadow:Object(g.Lb)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g,u,f=this.conf,b=f.bound||{},p=f.line,m=b.style||{},v=this.compositionsByCategory;for(o in 2<=arguments.length?(t=arguments[0],d=arguments[1]):1<=arguments.length&&(d=arguments[0]),g=d.animationManager,e=d.parentLayer,n=(a=d.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,d),h=this._lSpace,this.group=i=g.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:Se}),this.bound=g.setAnimation({el:this.bound||"rect",attr:h.bound,css:m,component:Se,container:i}),s=this.getDrawableAxisArea(h.node.logicArea),c=this.getColorGradient(a),f.style.fill=c.axis,f.shadow.style.fill=c.shadow,this.node=g.setAnimation({el:this.node||"rect",attr:s,css:f.style,container:i,component:Se}),this.shadow=g.setAnimation({el:this.shadow||"rect",attr:s,css:f.shadow.style,container:i,component:Se}),u=this.getScaleMarkerPathStr(s,n),this.path=g.setAnimation({el:this.path||"path",attr:{path:u},css:p.style,container:i,component:Se}),v)r=v[o],o===Te.RANGE&&(d[(l=this.preDrawingRangeParam(s)).prop]=l[l.prop],d.key=l.prop,d.rCalcBase=l.calculationBase,d.parentLayer=i,r.draw(l.rangeStart,l.rangeEnd,d))}},{key:"getScaleMarkerPathStr",value:function(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)}},{key:"getColorGradient",value:function(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)}},{key:"getScaleMarkerPathStrV",value:function(e,t){var o,a,n,r,i,l=De(e,{}),c=this.conf.line,s="",h="";for(l.y+=l.r,l.height-=2*l.r,r=l.x+l.width,o=0,n=t.length;o<n;o++)a=t[o],i=l.y+a*l.height/100,s+="M"+(r-c.grooveLength)+","+i+"L"+(r+c.offset)+","+i;return s+(h+="M"+(r+c.offset)+","+l.y+"L"+(r+c.offset)+","+(l.y+l.height))}},{key:"getColorGradientV",value:function(e){return{axis:e.getBoxFill(!0),shadow:Object(g.Lb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}}]),e}(),Ue=function(){function e(t,o,a){Object(i.a)(this,e),this.conf=o.conf,this.sliderIndex=t,this.rangeGroup=o.sliderGroup,this._id=a,this.node=Le,this.tracker=Le,this.currPos=0,this.swing=[]}return Object(n.a)(e,[{key:"configure",value:function(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.currPos=0,this.swing=[]}},{key:"getType",value:function(){return"slider"}},{key:"getName",value:function(){return"Slider"}},{key:"updateSwingRange",value:function(e,t){this.swing[+e]=t}},{key:"draw",value:function(e,t,o,a){var n,r,i,l,c,s,h,d=Math.ceil,g=a.parentLayer,u=a.animationManager,f=this.conf,b=f.outerCircle,p=f.innerCircle,m=u.getFromEnv("chart").config,v=d(b.rFactor*a.rCalcBase/2),y=d(p.rFactor*a.rCalcBase/2),k="L"-y,O=a.gLegend.getFromEnv("toolTipController"),C=this.sliderIndex;return f.outerRadius=v,f.innerRadius=y,this._scaleVal=t,p.style["stroke-width"]=k,y+=l=d(b.style["stroke-width"]/2),r=this.node=u.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:g,component:Se}),"x"===a.key?(c=o,s=e,s+=C?-y:+y):(c=e,s=o,c+=C?-y:+y),this.oCircle=u.setAnimation({el:this.oCircle||"circle",attr:{cx:c,cy:s,r:v},css:b.style,container:r,component:Se}),this.iCircle=u.setAnimation({el:this.iCircle||"circle",attr:{cx:c,cy:s,r:y},css:p.style,container:r,component:Se}),h=this.tracker=u.setAnimation({el:this.tracker||"circle",attr:{cx:c,cy:s,r:v+5,fill:Ie,stroke:Ie,cursor:"pointer"},container:r,component:Se}),r.attr({transform:"x"===a.key?"t0,"+this.currPos:"t"+this.currPos+",0"}),n=m.showToolTip?t:"",O.enableToolTip(h,n),this._dragAPI=i=this.getDragAPI("x"===a.key),h.undrag(),h.drag(i.dragging,i.dragStart,i.dragEnd),{translateAscending:v+l}}},{key:"getDragAPI",value:function(e){var t,o,a,n,r=this,i=r.node,l=r.sliderIndex,c=r.rangeGroup,s=r.conf.innerRadius;return{dragging:function(h){var d,g,u,f,b;return h.stopPropagation(),u=e?h.data[1]:h.data[0],l?(d=t[0]-t[1]+s,g=0):(d=0,g=t[1]-t[0]-s),(b=r.currPos+u)<d?u+=d-b:b>g&&(u-=b-g),i.attr({transform:e?"t0,"+(r.currPos+u):"t"+(r.currPos+u)+",0"}),o=u,a&&clearTimeout(a),a=setTimeout(function(){c.updateWhenInRest(r,r.currPos+u)},100),f=c.updateWhenInMove(r,r.currPos+u),r.conf.showTooltip&&r.tracker.data("__FC_tooltipText",f),n=!0,!0},dragStart:function(e){e.stopPropagation(),t=r.swing,n=!1,c.dragStarted(r)},dragEnd:function(){var e;c.dragCompleted(r,n,r.currPos+o),n&&(a&&clearTimeout(a),a=setTimeout(function(){c.updateWhenInRest(r,r.currPos)},100),r.currPos+=o,e=t[+l]+r.currPos,c.updateRange(r,e))}}}},{key:"dispose",value:function(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()}}]),e}(),Ze=function(){function e(t){Object(i.a)(this,e);var o={};this._id="GL_SG1",this.conf=t,o.conf=t,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,o.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[Pe]=new Ue(Pe,o,this._id+"_0"),this.sliders[Re]=new Ue(Re,o,this._id+"_1")}return Object(n.a)(e,[{key:"configure",value:function(e){var t={};this.min=void 0,this.max=void 0,this.conf=e,t.conf=e,t.sliderGroup=this,this.sliders[Pe].configure(Pe,t,this._id+"_0"),this.sliders[Re].configure(Re,t,this._id+"_1")}},{key:"getType",value:function(){return"slider"}},{key:"getName",value:function(){return"SliderGroup"}},{key:"initRange",value:function(e,t){var o=e.sliderIndex;this.extremes[+o]=t}},{key:"updateRange",value:function(e,t){var o=e.sliderIndex;this.sliders[!o].updateSwingRange(o,t)}},{key:"reset",value:function(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[Pe].configure(Pe,e,this._id+"_0"),this.sliders[Re].configure(Re,e,this._id+"_1"),this.draw.apply(this,this._drawParams)}},{key:"draw",value:function(e,t,o){var a,n,r,i,l,c=Math.ceil,s=this.sliders,h=s[!1],d=s[!0],g=o.colorRange,u=g.colorRange,f=g.data.mapByPercent,b=o.gLegend.getFromEnv("number-formatter");return this._fcChart=o.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,o,a){this.getValueFormPixel=function(n){return e+(t-e)/(a-o)*n}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(o,a){var n,r,i=this.extremes;return n=o.sliderIndex?i[1]-i[0]+a:a,r=this.getValueFormPixel(n),r=t?parseFloat(r).toFixed(2)+"%":e.legendValue(r)}},this._drawParams=[e,t,o],this.updateWhenInMove(b,f),n=h.conf.outerCircle,r=c(h.conf.innerCircle.rFactor*o.rCalcBase/2),r+=c(n.style["stroke-width"]/2),this.extremes[0]=e+r,this.extremes[1]=t-r,i=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:u[0].value,this.max=this.max?this.max:u[u.length-1].value,l=u[u.length-1].value-u[0].value,h.currPos=i*(this.min-u[0].value)/l,d.currPos=i*(this.max-u[0].value)/l-i,h.draw(e,f?b.legendPercentValue(this.min):b.legendValue(this.min),o[o.key],o),a=d.draw(t,f?b.legendPercentValue(this.max):b.legendValue(this.max),o[o.key],o),h.swing=this.extremes.slice(0),d.swing=this.extremes.slice(0),h.swing[1]+=d.currPos,d.swing[0]+=h.currPos,this.getValueFormPixel(u[0].value,u[u.length-1].value,this.extremes[0],this.extremes[1]),a}},{key:"updateWhenInRest",value:function(e,t){var o,a,n=this.sliders,r=this.extremes,i=e.sliderIndex;i?(o=n[!i].currPos,a=r[1]-r[0]+t):(o=t,a=r[1]-r[0]+n[!i].currPos),this.min=+this.getValueFormPixel(o).toFixed(2),this.max=+this.getValueFormPixel(a).toFixed(2),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])}},{key:"dragStarted",value:function(e){var t=this.sliders,o=this.extremes,a=e.conf,n=this._fcChart;n.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(o[1]-o[0]+t.true.currPos)}],legendPointerHeight:a.outerRadius,legendPointerWidth:a.innerRadius,outerRadius:a.outerRadius,innerRadius:a.innerRadius},[n.id])}},{key:"dragCompleted",value:function(e,t,o){var a,n,r=this.sliders,i=this.extremes,l=e.conf,c=this.getValueFormPixel(r.false.currPos),s=this.getValueFormPixel(i[1]-i[0]+r.true.currPos),h=this._fcChart;e.sliderIndex?(a=c,n=this.getValueFormPixel(i[1]-i[0]+o)):(a=this.getValueFormPixel(o),n=s),t&&h.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:c,previousMaxValue:s,minValue:a,maxValue:n},[h.id]),h.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:a},{value:n}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[h.id])}},{key:"dispose",value:function(){this.sliders[Pe].dispose(),this.sliders[Re].dispose()}}]),e}(),qe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this,arguments[0])))._id="GL_VALUES",e.node=[],e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"configure",value:function(e){this.conf=e}},{key:"getName",value:function(){return"LegendValues"}},{key:"getType",value:function(){return"legend"}},{key:"getLogicalSpace",value:function(e,t,o){var a,n,r,i,l,c,s,h,d,g,u,f,b,p,m,v,y,k,O,C,j,x,A,w,F,L=Math.min,E=Math.max,S="bottom"===this.conf.legendPosition,_=this._lSpace,T=this.conf,I=T.padding,P=t.gLegend.getFromEnv("chartConfig"),R=[],M=[];if(_&&!o)return _.isImpure=!0,_;for(a=t.colorRange,n=t.smartLabel,r=a.colorRange,s=a.getCumulativeValueRatio(),F=(_=this._lSpace={bound:{height:0,width:0},node:{logicArea:Le,smartTexts:[]}}).node.smartTexts,(C=De(e,{})).height-=2*I.v,C.width-=2*I.h,C.x+=I.h,C.y+=I.v,n.useEllipsesOnOverflow(P.useEllipsesWhenOverflow),w=De(T.style,{}),Ne(this._metaStyle=w),n.setStyle(w),A=n.getSmartText("W"),c=r.length,S?(u=h=(s[c-1]-s[0])/2*C.width/100,x=r[0].displayValue,(i=n.getSmartText("string"!=typeof x&&x!==Le&&x.toString()||x,u,C.height)).x=s[0]*C.width/100,f=i.x+i.width,R.push(i.height)):(u=h=(s[c-1]-s[0])/2*C.height/100,(i=n.getSmartText(r[0].displayValue,C.width,u)).y=s[0]*C.height/100,m=i.y+i.width,M.push(i.width)),F[0]=i,S?((i=n.getSmartText(r[c-1].displayValue,u,C.height)).x=s[c-1]*C.width/100,p=i.x-i.width,R.push(i.height),b=f):((i=n.getSmartText(r[c-1].displayValue,C.width,u)).y=s[c-1]*C.height/100,y=i.y-i.height,M.push(i.width),v=m),F[c-1]=i,l=1;l<c-1;l++)i=Le,j=r[l].displayValue,S?(d=l+1===c-1?p:s[l+1]*C.width/100,(h=L((g=s[l]*C.width/100)-b,d-g))>1.5*A.width&&((i=n.getSmartText(j,2*h,C.height)).x=s[l]*C.width/100,b=h,R.push(i.height))):(d=l+1===c-1?y:s[l+1]*C.height/100,(h=L((g=s[l]*C.height/100)-v,d-g))>2*A.height&&((i=n.getSmartText(j,C.width,2*h)).y=s[l]*C.height/100,v=h,M.push(i.width))),F[l]=i;return S?(k=E.apply(Math,R),C.height=k,e.height=k+2*I.v):(O=E.apply(Math,M),C.width=O,e.width=O+2*I.h),_.node.logicArea=C,_.bound=e,e}},{key:"draw",value:function(){var e,t,o,a,n,r,i,l,c,s,h,d,g,u=this.conf,f="bottom"===u.legendPosition,b=u.bound&&u.bound.style||{stroke:"none"},p={};2<=arguments.length&&arguments[1]?(a=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),g=i.animationManager,e=i.parentLayer,l=i.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(a,i),r=(n=this._lSpace).node.logicArea,h=n.node.smartTexts,this.group=o=g.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:Se}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:n.bound,css:b,container:o,component:Se});for(var m=0;m<this.node.length;m++)this.node[m].remove();for(this.node=[],c=0,s=l.length;c<s;c++)(d=h[c])&&(f?(p.y=r.y+d.height/2,p.x=c===s-1?r.x+d.x-d.width/2:c?r.x+d.x:r.x+d.x+d.width/2):(p.x=r.x+d.width/2,p.y=c===s-1?r.y+d.y-d.height/2:c?r.y+d.y:r.y+d.y+d.height/2),this.node.push(g.setAnimation({el:"text",attr:{text:d.text,x:p.x,y:p.y,lineHeight:this._metaStyle.lineHeight,fill:u.style.fill},container:o,component:Se})));return{group:o,bound:t}}}]),t}(Ye),Qe=He,$e=o(464);var et=function(e){!function(e){var t,o=e.getFromEnv("dataSource").colorrange,a=e.getFromEnv("dataSource").chart.mapbycategory,n="maps"===e.defaultDatasetType,r="TreeMap"===e.getName(),i=e.getFromEnv("legend"),l=e.getFromEnv("gLegend");"gradient"===(t=o&&e.config.showLegend?n?o.gradient&&+o.gradient?"gradient":o.color?"icon":"none":r?o.gradient&&"0"!=o.gradient?"gradient":"none":o.gradient&&"0"!=o.gradient&&!+a?"gradient":"icon":"none")?(e.deleteFromEnv("legend"),i&&i.remove(),Object(g.M)(e,Qe,"gLegend",1),(l=e.getChildren("gLegend")[0]).configure(),e.addToEnv("gLegend",l)):"icon"===t?(e.deleteFromEnv("gLegend"),l&&l.remove(),Object(g.M)(e,$e.a,"legend",1,{showLegend:!0}),(i=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",i)):"none"===t&&(e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),l&&l.remove(),i&&i.remove())}(e)},tt=Object(C.c)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},m),ot="0,100",at={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},nt={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){var e,t,o,a,n,r=this.jsVars.instanceAPI.getDatasets()||[],i=r.length,l=[];for(e=0;e<i;e++)if("entities"===(o=r[e]||[]).getName()){t=o;break}for(e in i=(a=t.components.data).length,a)a.hasOwnProperty(e)&&(n=(a[e]||{}).config||{},l.push({id:n.id,originalId:n.originalId||n.id,label:n.label,shortlabel:n.shortLabel,value:n.value,formattedValue:n.formattedValue,toolText:n.toolText}));return l},getMapAttribute:function(){return Object(y.f)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),this.getChartAttribute.apply(this,arguments)},exportMap:function(){var e=this;return Object(y.f)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){var t,o,a,n=this.jsVars.instanceAPI.getDatasets()||[],r=n.length;for(t=0;t<r;t++)if("markers"===(o=n[t]||[]).getName()){a=o;break}a&&!a.addMarkerItem(e)&&Object(y.f)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){var o,a,n,r=this.jsVars.instanceAPI.getDatasets()||[],i=r.length;for(o=0;o<i;o++)if("markers"===(a=r[o]||[]).getName()){n=a;break}n&&e&&(e=(e+rt).toLowerCase(),n.updateMarkerItem(e,t))},removeMarker:function(e){var t,o,a,n=this.jsVars.instanceAPI.getDatasets()||[],r=n.length;for(t=0;t<r;t++)if("markers"===(o=n[t]||[]).getName()){a=o;break}e&&(e=(e+rt).toLowerCase(),a._removeMarkerItem(e))}},rt="",it=window.Math,lt=it.min,ct=it.max,st=function(e){function t(e,o){var a;for(var n in Object(i.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this))).subpalette="",a.key="",a.index=o,e)a.subpalette=tt[e[n]],a[n]=a.subpalette instanceof Array?a.subpalette[o]:a.subpalette,a.key=n;return a}return Object(s.a)(t,e),t}(p.a),ht=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(c.a)(t).call(this))).friendlyName="Map",e.revision=1,e.hasCanvas=!0,e.standaloneInit=!1,e.defaultDatasetType="maps",e.defaultSeriesType="geo",e.fireGroupEvent=!0,e.legendposition="right",e.hasGradientLegend=!0,e.isMap=!0,e.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[ot,ot,ot,ot,ot],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},e.colorPaletteMap=at,e.eiMethods=nt,e.registerFactory("legend",et,["canvas"]),e.registerFactory("axis",function(){},["canvas"]),e.registerFactory("colormanager-decider",_e,["legend"]),e.registerFactory("dataset",me,["colormanager-decider"]),e.registerFactory("canvas",ve.a),e}return Object(s.a)(t,e),Object(n.a)(t,[{key:"_checkInvalidSpecificData",value:function(){return this.config.invalid=!1,!1}},{key:"__setDefaultConfig",value:function(){Object(r.a)(Object(c.a)(t.prototype),"__setDefaultConfig",this).call(this);var e=this.config;e.baseWidth||(e.baseWidth=400),e.baseHeight||(e.baseHeight=300),e.baseScaleFactor||(e.baseScaleFactor=1)}},{key:"getName",value:function(){return this.config.name||"GEO"}},{key:"getType",value:function(){return"chartAPI"}},{key:"configureAttributes",value:function(e){var o,a=this,n=a.getChildren("colorPalette")&&a.getChildren("colorPalette")[0];o=e.chart=e.chart||e.graph||e.map||{},a.jsonData=e,Object(g.M)(a,O.a,"mapAnnotations"),n||(n=new st(this.colorPaletteMap,(0<o.palette&&6>o.palette?o.palette:Object(g.Ab)(a.paletteIndex,1))-1),a.attachChild(n,"colorPalette")),a.config.skipCanvasDrawing=!0,Object(r.a)(Object(c.a)(t.prototype),"configureAttributes",this).call(this,e),a._parseBackgroundCosmetics()}},{key:"parseChartAttr",value:function(e){var o,a,n,i,l,s=this,h=s.jsonData,d=h.chart||h.map,u=h.markers,f=new st(this.colorPaletteMap,(0<d.palette&&6>d.palette?d.palette:Object(g.Ab)(s.paletteIndex,1))-1),b=Object(g.yb)(d.entitybordercolor,d.bordercolor,f.plotbordercolor),p=Object(g.yb)(d.entityfillcolor,d.fillcolor,f.plotfillcolor),m=Object(g.yb)(d.entityfillalpha,d.fillalpha,f.plotfillalpha),v=Object(g.yb)(d.entityfillratio,d.fillratio,f.plotfillratio),y=Object(g.yb)(d.entityfillangle,d.fillangle,f.plotfillangle),k=Object(g.yb)(d.nullentityfillcolor,d.nullentitycolor,p),O=Object(g.Ab)(d.usevaluesformarkers,h.markers&&h.markers.items&&h.markers.items.length,!(h.markers&&h.markers.application&&h.markers.application.length&&h.markers.definition&&h.markers.definition.length));Object(r.a)(Object(c.a)(t.prototype),"parseChartAttr",this).call(this,e),(o=s.config).origMarginTop=Object(g.Ab)(d.charttopmargin,d.maptopmargin,11),o.origMarginLeft=Object(g.Ab)(d.chartleftmargin,d.mapleftmargin,11),o.origMarginBottom=Object(g.Ab)(d.chartbottommargin,d.mapbottommargin,11),o.origMarginRight=Object(g.Ab)(d.chartrightmargin,d.maprightmargin,11),o.labelsOnTop=Object(g.Ab)(d.entitylabelsontop,1),a=(l=o.style).inCancolor,n=l.inCanfontFamily,i=l.inCanfontSize,o.entityOpts={baseScaleFactor:o.baseScaleFactor,dataLabels:{style:{fontFamily:n,fontSize:i,lineHeight:l.inCanLineHeight,color:l.inCancolor}},fillColor:p,fillAlpha:m,fillRatio:v,fillAngle:y,borderColor:b,borderAlpha:Object(g.yb)(d.entityborderalpha,d.borderalpha,s.borderAlpha,"100"),borderThickness:Object(g.Ab)(d.showentityborder,d.showborder,1)?Object(g.Ab)(d.entityborderthickness,d.borderthickness,1):0,scaleBorder:Object(g.Ab)(d.scaleentityborder,d.scaleborder,0),hoverFillColor:Object(g.yb)(d.entityfillhovercolor,d.hoverfillcolor,d.hovercolor,f.plothoverfillcolor),hoverFillAlpha:Object(g.yb)(d.entityfillhoveralpha,d.hoverfillalpha,d.hoveralpha,f.plothoverfillalpha),hoverFillRatio:Object(g.yb)(d.entityfillhoverratio,d.hoverfillratio,d.hoverratio,f.plothoverfillratio),hoverFillAngle:Object(g.yb)(d.entityfillhoverangle,d.hoverfillangle,d.hoverangle,f.plothoverfillangle),hoverBorderThickness:Object(g.yb)(d.entityborderhoverthickness,d.hoverborderthickness),hoverBorderColor:Object(g.yb)(d.entityborderhovercolor,b,f.plotbordercolor),hoverBorderAlpha:Object(g.yb)(d.entityborderhoveralpha,f.plotborderalpha),nullEntityColor:k,nullEntityAlpha:Object(g.yb)(d.nullentityfillalpha,d.nullentityalpha,m),nullEntityRatio:Object(g.yb)(d.nullentityfillratio,d.nullentityratio,v),nullEntityAngle:Object(g.yb)(d.nullentityfillangle,d.nullentityangle,y),connectorColor:Object(g.yb)(d.labelconnectorcolor,d.connectorcolor,a),connectorAlpha:Object(g.yb)(d.labelconnectoralpha,d.connectoralpha,"100"),connectorThickness:Object(g.Ab)(d.labelconnectorthickness,d.borderthickness,1),showHoverEffect:Object(g.Ab)(d.showentityhovereffect,d.usehovercolor,d.showhovereffect,1),hoverOnNull:Object(g.Ab)(d.hoveronnull,d.entityhoveronnull,1),labelPadding:Object(g.Ab)(d.labelpadding,5),showLabels:Object(g.Ab)(d.showlabels,1),labelsOnTop:Object(g.Ab)(d.entitylabelsontop,1),includeNameInLabels:Object(g.Ab)(d.includenameinlabels,1),includeValueInLabels:Object(g.Ab)(d.includevalueinlabels,0),useSNameInTooltip:Object(g.Ab)(d.usesnameintooltip,0),useShortName:Object(g.Ab)(d.usesnameinlabels,1),labelSepChar:Object(g.yb)(d.labelsepchar,", "),showTooltip:Object(g.Ab)(d.showentitytooltip,d.showtooltip,1),tooltipSepChar:Object(g.yb)(d.tooltipsepchar,", "),tooltext:d.entitytooltext,hideNullEntities:Object(g.Ab)(d.hidenullentities,0),showHiddenEntityBorder:Object(g.Ab)(d.showhiddenentityborder,1),showNullEntityBorder:Object(g.Ab)(d.shownullentityborder,1),hiddenEntityColor:Object(g.yb)(d.hiddenentitycolor,d.hiddenentityfillcolor,d.hiddenentityalpha||d.hiddenentityfillalpha?k:"ffffff"),hiddenEntityAlpha:Object(g.yb)(d.hiddenentityalpha,d.hiddenentityfillalpha,.001),shadow:Object(g.Ab)(d.showshadow,s.defaultPlotShadow,f.shadow)},o.markerOpts={dataLabels:{style:{fontFamily:Object(g.yb)(d.markerfont,n),fontSize:Object(g.Ab)(d.markerfontsize,parseInt(i,10)),fontColor:Object(g.yb)(d.markerfontcolor,a)}},showTooltip:Object(g.Ab)(d.showmarkertooltip,d.showtooltip,1),showLabels:Object(g.Ab)(d.showmarkerlabels,d.showlabels,1),showHoverEffect:Object(g.Ab)(d.showmarkerhovereffect,1),labelPadding:Object(g.yb)(d.markerlabelpadding,"5"),labelWrapWidth:Object(g.Ab)(d.markerlabelwrapwidth,0),labelWrapHeight:Object(g.Ab)(d.markerlabelwrapheight,0),fillColor:Object(g.yb)(d.markerfillcolor,d.markerbgcolor,f.markerfillcolor),fillAlpha:Object(g.yb)(d.markerfillalpha,f.markerfillalpha),fillAngle:Object(g.yb)(d.markerfillangle,f.markerfillangle),fillRatio:Object(g.yb)(d.markerfillratio,f.markerfillratio),fillPattern:Object(g.yb)(d.markerfillpattern,f.markerbgpattern),hoverFillColor:d.markerfillhovercolor,hoverFillAlpha:d.markerfillhoveralpha,hoverFillRatio:d.markerfillhoverratio,hoverFillAngle:d.markerfillhoverangle,borderThickness:Object(g.yb)(d.markerborderthickness,1),borderColor:Object(g.yb)(d.markerbordercolor,f.markerbordercolor),borderAlpha:Object(g.Ab)(d.markerborderalpha,f.markerborderalpha),hoverBorderThickness:d.markerborderhoverthickness,hoverBorderColor:d.markerborderhovercolor,hoverBorderAlpha:d.markerborderhoveralpha,radius:Object(g.Ab)(d.markerradius&&Object(g.Nb)(d.markerradius),7),shapeId:Object(g.yb)(d.defaultmarkershape,"circle"),labelSepChar:Object(g.yb)(d.labelsepchar,", "),tooltipSepChar:Object(g.yb)(d.tooltipsepchar,", "),autoScale:Object(g.Ab)(d.autoscalemarkers,0),tooltext:Object(g.yb)(u&&u.tooltext,d.markertooltext),dataEnabled:O,valueToRadius:Object(g.Ab)(d.markerradiusfromvalue,1),valueMarkerAlpha:Object(g.yb)(d.valuemarkeralpha,"75"),hideNull:Object(g.Ab)(d.hidenullmarkers,0),nullRadius:Object(g.Ab)(d.nullmarkerradius,d.markerradius,7),adjustViewPort:Object(g.Ab)(d.adjustviewportformarkers,0),startAngle:Object(g.Ab)(d.markerstartangle,90),maxRadius:Object(g.Ab)(d.maxmarkerradius,0),minRadius:Object(g.Ab)(d.minmarkerradius,0),applyAll:Object(g.Ab)(d.applyallmarkers,0),shadow:Object(g.Ab)(d.showmarkershadow,d.showshadow,0)},o.connectorOpts={showHoverEffect:Object(g.Ab)(d.showconnectorhovereffect,1),thickness:Object(g.Ab)(d.connectorthickness,d.markerconnthickness,"2"),color:Object(g.yb)(d.connectorcolor,d.markerconncolor,f.markerbordercolor),alpha:Object(g.yb)(d.connectoralpha,d.markerconnalpha,"100"),hoverThickness:Object(g.Ab)(d.connectorhoverthickness,d.connectorthickness,d.markerconnthickness,"2"),hoverColor:Object(g.yb)(d.connectorhovercolor,d.connectorcolor,d.markerconncolor,f.markerbordercolor),hoverAlpha:Object(g.yb)(d.connectorhoveralpha,d.connectoralpha,d.markerconnalpha,"100"),dashed:Object(g.Ab)(d.connectordashed,d.markerconndashed,0),dashLen:Object(g.Ab)(d.connectordashlen,d.markerconndashlen,3),dashGap:Object(g.Ab)(d.connectordashgap,d.markerconndashgap,2),font:Object(g.yb)(d.connectorfont,d.markerconnfont,n),fontColor:Object(g.yb)(d.connectorfontcolor,d.markerconnfontcolor,a),fontSize:Object(g.Ab)(d.connectorfontsize,d.markerconnfontsize,parseInt(i,10)),showLabels:Object(g.Ab)(d.showconnectorlabels,d.showmarkerlabels,d.showlabels,1),labelBgColor:Object(g.yb)(d.connectorlabelbgcolor,d.markerconnlabelbgcolor,f.plotfillcolor),labelBorderColor:Object(g.yb)(d.connectorlabelbordercolor,d.markerconnlabelbordercolor,f.markerbordercolor),shadow:Object(g.Ab)(d.showconnectorshadow,d.showmarkershadow,d.showshadow,0),showTooltip:Object(g.Ab)(d.showconnectortooltip,d.showmarkertooltip,d.showtooltip,1),tooltext:Object(g.yb)(u&&u.connectortooltext,d.connectortooltext),hideOpen:Object(g.Ab)(d.hideopenconnectors,1)},o.adjustViewPortForMarkers=Object(g.Ab)(d.adjustviewportformarkers,O)}},{key:"_attachMouseEvents",value:function(){var e=this,o=e.getFromEnv("eventListeners"),a=e.getFromEnv("chart-container");o.push(v.a.listen(a,g.jb?"touchstart":"click",t.searchMouseMove,e)),o.push(v.a.listen(window.document,g.jb?"touchstart":"mousemove",t.searchMouseMove,e))}},{key:"_dispose",value:function(){var e=this.getFromEnv("chart-container");g.jb&&(v.a.unlisten(e,"touchstart",t.searchMouseMove),v.a.unlisten(window.document,"touchstart",t.searchMouseMove)),v.a.unlisten(e,"click",t.searchMouseMove),v.a.unlisten(window.document,"mousemove",t.searchMouseMove),Object(r.a)(Object(c.a)(t.prototype),"_dispose",this).call(this)}},{key:"_searchNearestNeighbour",value:function(e,t){var o,a=this.getDatasets()[1];if(a){if(!a.components.kDTree)return;(o=a.getElement(e))?a.highlightPoint(o,t):a.highlightPoint(!1,t)}}},{key:"_createLayers",value:function(){Object(r.a)(Object(c.a)(t.prototype),"_createLayers",this).call(this),this._attachMouseEvents()}},{key:"_parseBackgroundCosmetics",value:function(){var e,t=this,o=t.getChildren("background")[0].config,a=t.getChildren("colorPalette")[0],n=t.getFromEnv("chart-attrib");e=o.showBorder=Object(g.Ab)(n.showcanvasborder,1),o.borderWidth=e?Object(g.Ab)(n.canvasborderthickness,1):0,o.borderRadius=o.borderRadius=Object(g.Ab)(n.canvasborderradius,0),o.borderDashStyle=o.borderDashStyle=Object(g.Ab)(n.borderdashed,0)?Object(g.Y)(Object(g.Ab)(n.borderdashlen,4),Object(g.Ab)(n.borderdashgap,2)):"none",o.borderAlpha=Object(g.yb)(n.canvasborderalpha,a.borderAlpha),o.borderColor=o.borderColor=Object(k.c)(Object(g.yb)(n.canvasbordercolor,a&&a.borderColor),o.borderAlpha)}},{key:"_getBackgroundCosmetics",value:function(){var e=this,t=e.getFromEnv("chart-attrib")||e.jsonData.map,o=e.getChildren("colorPalette")[0];return{FCcolor:{color:Object(g.yb)(t.bgcolor,t.canvasbgcolor,o.bgcolor),alpha:Object(g.yb)(t.bgalpha,t.canvasbgalpha,o.bgalpha),angle:Object(g.yb)(t.bgangle,t.canvasbgangle,o.bgangle),ratio:Object(g.yb)(t.bgratio,t.canvasbgratio,o.bgratio)}}}},{key:"_parseCanvasCosmetics",value:function(){Object(r.a)(Object(c.a)(t.prototype),"_parseCanvasCosmetics",this).call(this);var e=this,o=e.config,a=e.getFromEnv("chart-attrib")||e.jsonData.map,n=e.getChildren("canvas")[0].config;o.origMarginTop=Object(g.Ab)(a.maptopmargin,11),o.origMarginLeft=Object(g.Ab)(a.mapleftmargin,11),o.origMarginBottom=Object(g.Ab)(a.mapbottommargin,11),o.origMarginRight=Object(g.Ab)(a.maprightmargin,11),o.origCanvasLeftMargin=Object(g.Ab)(a.canvasleftmargin,0),o.origCanvasRightMargin=Object(g.Ab)(a.canvasrightmargin,0),o.origCanvasTopMargin=Object(g.Ab)(a.canvastopmargin,0),o.origCanvasBottomMargin=Object(g.Ab)(a.canvasbottommargin,0),n.canvasBorderRadius=Object(g.Ab)(a.canvasborderradius,0),n.origCanvasTopPad=Object(g.Ab)(a.canvastoppadding,0),n.origCanvasBottomPad=Object(g.Ab)(a.canvasbottompadding,0),n.origCanvasLeftPad=Object(g.Ab)(a.canvasleftpadding,0),n.origCanvasRightPad=Object(g.Ab)(a.canvasrightpadding,0)}},{key:"preliminaryScaling",value:function(){for(var e,t,o,a=this.jsonData,n=a.markers&&a.markers.items||[],r=n&&n.length||0,i=1/0,l=1/0,c=-1/0,s=-1/0;r--;)e=+(o=n[r]).x,t=+o.y,i=lt(i,e),l=lt(l,t),c=ct(c,e),s=ct(s,t);return{x:i,y:l,x1:c,y1:s}}},{key:"getScalingParameters",value:function(e,t,o,a){var n,r,i=e/t,l=o/(e*this.config.baseScaleFactor),c=a/(t*this.config.baseScaleFactor),s=0,h=0;return l>c?(s+=(o-a*i)/2,r=200/(t*(n=c))):(h+=(a-o/i)/2,r=200/(e*(n=l))),{scaleFactor:n,strokeWidth:r,translateX:s,translateY:h}}},{key:"calculateMarkerBounds",value:function(e,t,o){var a,n,r,i,l,c,s,h,d,g,u,f,b=this,p=b.config,m=p.markerOpts,v=b.getDatasets(),y=b.getDataLimits(),k=y.dataMin,O=y.dataMax,C=m.hideNull,j=m.nullRadius,x=m.valueToRadius,A=1/0,w=1/0,F=-1/0,L=-1/0;for(c=0,h=v.length;c<h;c++)"markers"===(s=v[c]).getName()&&(a=s);if(a)for(c in a.calculateMarkerRadiusLimits(),r=(n=a.config||{}).minRadius,i=n.maxRadius,l=a.components&&a.components.markerObjs||{})f=(p=l[c].config).definition||{},null!==p.cleanValue?(x&&void 0===f.radius&&(p.radius=r+(i-r)*(p.cleanValue-k)/(O-k)),u=+p.radius,d=(+f.x+t)*e,g=(+f.y+o)*e,A=lt(A,d-u),w=lt(w,g-u),F=ct(F,d+u),L=ct(L,g+u)):C?p.__hideMarker=!0:null===p.radius&&(p.radius=j);return{x:A,y:w,x1:F,y1:L}}},{key:"_spaceManager",value:function(){var e,t,o,a,n,r,i,l,c,s=this,h=s.config,d=s.getChildren("legend")&&s.getChildren("legend")[0],u=d&&d.config.legendPos,f=s.getFromEnv("chart-attrib"),b=h.showBorder,p=h.origMarginLeft,m=h.origMarginTop,v=s.config.baseWidth,y=s.config.baseHeight,k={},O=0,C=0,j=h.markerOpts,x=h.borderWidth=b?Object(g.Ab)(f.borderthickness,1):0;s._allocateSpace({top:x,bottom:x,left:x,right:x}),s._allocateSpace(s._manageActionBarSpace&&s._manageActionBarSpace(.225*h.availableHeight)||{}),l="right"===u?.3*h.canvasWidth:.3*h.canvasHeight,h.showLegend&&s._manageLegendSpace(l),e="bottom"===u?.225*h.canvasHeight:.225*h.canvasWidth,c=s._manageChartMenuBar(e),o=h.canvasWidth,a=h.canvasHeight,j.dataEnabled?(h.adjustViewPortForMarkers?((k=s.preliminaryScaling()).x1>v&&(v=k.x1),0>k.x&&(v+=-k.x,O=-k.x),k.y1>y&&(y=k.y1),0>k.y&&(y+=-k.y,C=-k.y),t=s.getScalingParameters(v,y,o,a),r=a,i=o,0>(k=s.calculateMarkerBounds(t.scaleFactor*s.config.baseScaleFactor,O,C)).x&&(p+=-k.x,o+=k.x),0>k.y&&(m+=-k.y,a+=k.y),k.x1>i&&(o-=k.x1-i),k.y1>r&&(a-=k.y1-r)):(t=s.getScalingParameters(v,y,o,a),s.calculateMarkerBounds(t.scaleFactor*s.config.baseScaleFactor,O,C)),p+=O*(t=s.getScalingParameters(v,y,o,a)).scaleFactor*s.config.baseScaleFactor,m+=C*t.scaleFactor*s.config.baseScaleFactor):t=s.getScalingParameters(v,y,o,a),s.config.scalingParams=t,n=t.scaleFactor,t.translateX+=p,t.translateY=t.translateY+m+c.top||0,t.sFactor=n*s.config.baseScaleFactor*100/100,t.transformStr=["t",t.translateX,",",t.translateY,"s",n,",",n,",0,0"].join(""),s.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:t.translateX?t.translateX:0,grpyshift:t.translateY?t.translateY:0,xscale:100*(n?n*s.config.baseScaleFactor:1),yscale:100*(n?n*s.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}},s.getChildren("mapAnnotations")[0].clear(),s.getChildren("mapAnnotations")[0].configureAttributes()}},{key:"getDataLimits",value:function(){var e,t,o=this.getDatasets(),a=o.length,n=1/0,r=-1/0;for(t=0;t<a;t++)e=o[t].getDataLimits(),n=lt(n,e.min),r=ct(r,e.max);return{dataMin:n,dataMax:r}}},{key:"getEntityPaths",value:function(e){var t,o={},a=this.config.entities;if(e){for(t in a)o[t]=a[t];return o}return a}},{key:"checkComplete",value:function(){var e=this;e.config.entityFlag&&e.config.entitiesReady&&(e.config.entityFlag=!1,e.config.markersDrawn=!0,e.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:e}))}}],[{key:"getName",value:function(){return"maps"}},{key:"getType",value:function(){return"chartAPI"}},{key:"searchMouseMove",value:function(e){var t,o=e.data,a=o.config,n=o.getDatasets()[1],r=n&&n.getFromEnv("toolTipController"),i=n&&n.config.currentToolTip,l=o.config.lastHoveredPoint,c={};o.getFromEnv("chart-container")&&o.config.lastInteractionEvent!==e.originalEvent&&(o.config.lastInteractionEvent=e.originalEvent,(t=function(e,t){var o=Object(g.db)(t.getFromEnv("chart-container"),e),a=o.chartX,n=o.chartY,r=t.config,i=r.canvasLeft,l=r.canvasTop,c=r.canvasLeft+r.canvasWidth,s=r.canvasHeight+r.canvasTop;return o.insideCanvas=!1,o.originalEvent=e,a>i&&a<c&&n>l&&n<s&&(o.insideCanvas=!0),o}(e,o))&&t.insideCanvas?(a.lastMouseEvent=e,c={x:t.chartX,y:t.chartY},o._searchNearestNeighbour(c,e)):(l&&n&&n.hoverOutFn.call(l.element),o.config.lastHoveredPoint=null,r&&r.hide(i)))}}]),t}(b);o.d(t,"Maps",function(){return ht});t.default={name:"maps",type:"package",requiresFusionCharts:!0,extension:function(e){return e.addDep(ht)}}}}]);
//# sourceMappingURL=2.fb68a7f5.chunk.js.map